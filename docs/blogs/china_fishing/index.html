<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Raymond Hunter">
<meta name="dcterms.date" content="2024-03-06">
<meta name="description" content="China’s Illegal and Legal Fishing Vessels Using AIS (2012-2020)">

<title>The World’s Largest Fishing Fleet</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blogs.html"> 
<span class="menu-text">My Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/raymond-hunter-90a8081a7/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ramhunte"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:rmhunter999@gmail.com"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#about-the-data" id="toc-about-the-data" class="nav-link" data-scroll-target="#about-the-data">About the Data</a></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions">Questions</a></li>
  <li><a href="#set-up" id="toc-set-up" class="nav-link" data-scroll-target="#set-up">Set up</a></li>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling">Data Wrangling</a></li>
  <li><a href="#tree-map" id="toc-tree-map" class="nav-link" data-scroll-target="#tree-map">Tree Map</a></li>
  <li><a href="#donut-chart" id="toc-donut-chart" class="nav-link" data-scroll-target="#donut-chart">Donut Chart</a></li>
  <li><a href="#barchart" id="toc-barchart" class="nav-link" data-scroll-target="#barchart">Barchart</a></li>
  <li><a href="#text-annotation" id="toc-text-annotation" class="nav-link" data-scroll-target="#text-annotation">Text Annotation</a></li>
  <li><a href="#base-infographic" id="toc-base-infographic" class="nav-link" data-scroll-target="#base-infographic">Base Infographic</a></li>
  <li><a href="#adding-creativity" id="toc-adding-creativity" class="nav-link" data-scroll-target="#adding-creativity">Adding Creativity</a></li>
  <li><a href="#stitching-together" id="toc-stitching-together" class="nav-link" data-scroll-target="#stitching-together">Stitching Together</a></li>
  <li><a href="#design-elements" id="toc-design-elements" class="nav-link" data-scroll-target="#design-elements">Design Elements:</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">The World’s Largest Fishing Fleet</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">Quarto</div>
    <div class="quarto-category">R</div>
    <div class="quarto-category">DataViz</div>
  </div>
  </div>

<div>
  <div class="description">
    China’s Illegal and Legal Fishing Vessels Using AIS (2012-2020)
  </div>
</div>


<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><a href="<https://ramhunte.github.io/">Raymond Hunter</a> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 6, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><a href="https://github.com/ramhunte/Hunter-eds240-HW4">Github Project Repository</a></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This blog post is intended to show how to create an infographic from start to finish while considering 10 different design elements along the way: <em>graphic forms, text, themes, colors, typography, general design, data contextualization, primary message, accessibility, and diversity, equity, and inclusion (DEI)</em>. I used publically available data provided by <a href="https://globalfishingwatch.org/">Global Fishing Watch (GFW)</a> to investigate and compare different aspects of China’s illegal and legal fishing fleets. While showing figures and plots individually has its relevance, stitching together a story through multiple visualizations and text by creating an <em>infographic</em> can be a powerful tool. It allows the reader to walk through an oftentimes artistic thought process or an idea in multiple steps rather than interperet a stand alone figure. However, it is improtant to keep in minds the draw backs that can come with infographics such as confusing the reader through too much complext visualization. Here, I will walk you through how I created an artistic, simple, yet compelling story on China’s fishing vessels through a tree map, donut chart, and barchart.</p>
</section>
<section id="about-the-data" class="level2">
<h2 class="anchored" data-anchor-id="about-the-data">About the Data</h2>
<p>This data set I used is publicly available on the <a href="https://globalfishingwatch.org/data-download/datasets/public-fishing-effort">Global Fishing Watch (Data Link)</a> website. The website contains a number of different data sets on global fishing vessels with the goal of trying highlighting illegal fishing vessel activity. The specific data set I used was called <code>fishing-vessels-v2.csv</code> which is the most up-to-date public data set on predicted legal/illegal fishing vessel status. It was generated by GFW using machine learning to predict which vessels were actively fishing regardless of whether or not they identified as a legal fishing vessel. The data identifies global fishing vessels that used Automatic Identification System (AIS) from 2012-2020 by country. It contains a number of different variables describing the fishing vessel class, engine power, length, weight, fishing time by year, country, and whether or not it was a self reported AIS fishing vessel. This data allows us to find which vessel classes by country are using AIS around the globe and report whether they are operating legally or illegally. I primarily focused on using the variables <code>mmsi</code> (the maritime mobile service identity or vessel identification number), <code>flag_gfw</code> (the country the vessel represents), <code>vessel_class_gfw</code> (the predicted vessel class), and <code>self_reported_fishing_vessel</code> (whether the vessel broadcasts itself as a fishing vessel using AIS) as my variables of interest.</p>
</section>
<section id="questions" class="level2">
<h2 class="anchored" data-anchor-id="questions">Questions</h2>
<p>I really wanted to look at China’s illegal and legal fishing vessels at a broad scale to compare across countries and identify dominant fishing vessel classes within the fleets. I asked the following questions to do so:</p>
<p><strong>1) How large are China’s illegal and legal fishing fleets using automatic identification system (AIS) compared to the next 9 largest countries’?</strong></p>
<p><strong>2) What percentage of China’s fleet using AIS legally reported its fishing status between 2012-2020?</strong></p>
<p><strong>3) What were the total number of illegal and legal fishing vessels by class using AIS between 2012-2020?</strong></p>
</section>
<section id="set-up" class="level2">
<h2 class="anchored" data-anchor-id="set-up">Set up</h2>
<p>Here I loaded some packages, imported some fonts and icons, and picked some colors for the theme of the infographic:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># loading necessary packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(showtext) <span class="co"># for grabbing fonts</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(png)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(grid)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">library</span>(here)</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co"># custom icons and fonts fonts </span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="fu">font_add</span>(<span class="at">family =</span> <span class="st">"Font Awesome 6 Brands"</span>,</span>
<span id="cb1-16"><a href="#cb1-16"></a>         <span class="at">regular =</span> <span class="fu">here</span>(rootdir, <span class="st">"otfs/Font-Awesome-6-Brands-Regular-400.otf"</span>))</span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="fu">font_add_google</span>(<span class="at">name =</span> <span class="st">"Sen"</span>, </span>
<span id="cb1-18"><a href="#cb1-18"></a>                <span class="at">family =</span> <span class="st">"sen"</span>)</span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="fu">font_add_google</span>(<span class="at">name =</span> <span class="st">"Playfair Display"</span>, </span>
<span id="cb1-20"><a href="#cb1-20"></a>                <span class="at">family =</span> <span class="st">"play"</span>)</span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="fu">showtext_auto</span>() <span class="co"># for importing fonts</span></span>
<span id="cb1-22"><a href="#cb1-22"></a></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="co"># github icon</span></span>
<span id="cb1-24"><a href="#cb1-24"></a>github_icon <span class="ot">&lt;-</span> <span class="st">"&amp;#xf09b"</span></span>
<span id="cb1-25"><a href="#cb1-25"></a>github_username <span class="ot">&lt;-</span> <span class="st">"ramhunte"</span></span>
<span id="cb1-26"><a href="#cb1-26"></a>gh_caption <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(</span>
<span id="cb1-27"><a href="#cb1-27"></a>  <span class="st">"&lt;span style='font-family:</span><span class="sc">\"</span><span class="st">Font Awesome 6 Brands</span><span class="sc">\"</span><span class="st">;'&gt;{github_icon};&lt;/span&gt;</span></span>
<span id="cb1-28"><a href="#cb1-28"></a><span class="st">  &lt;span style='color: white'&gt;{github_username}&lt;/span&gt;"</span></span>
<span id="cb1-29"><a href="#cb1-29"></a>  )</span>
<span id="cb1-30"><a href="#cb1-30"></a></span>
<span id="cb1-31"><a href="#cb1-31"></a><span class="co"># custom color palette</span></span>
<span id="cb1-32"><a href="#cb1-32"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">light_text =</span> <span class="st">"#f4c430"</span>,</span>
<span id="cb1-33"><a href="#cb1-33"></a>         <span class="at">dark_text =</span> <span class="st">"#b22222"</span>,</span>
<span id="cb1-34"><a href="#cb1-34"></a>         <span class="at">bg =</span> <span class="st">"#516776"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="data-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling">Data Wrangling</h2>
<p>Before I can create any plots, I need to wrangle and clean the data so that it can be used for the three different plots:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Cleaning and warngling data </span></span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co"># master data sheet</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>boats <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(rootdir, <span class="st">"data/fishing-vessels-v2.csv"</span>))</span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co"># clean sheet</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>boats_clean <span class="ot">&lt;-</span> boats <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="co">#cleaning names</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="co"># selecting specific columns</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>  <span class="fu">select</span>(mmsi, flag_gfw, vessel_class_gfw, tonnage_gt_gfw, self_reported_fishing_vessel,  fishing_hours_2012<span class="sc">:</span>fishing_hours_2020) <span class="sc">%&gt;%</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>  <span class="co"># filtering out na values</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(flag_gfw)) <span class="sc">%&gt;%</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="co"># changing class of variables</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>  <span class="fu">mutate</span>(<span class="at">mmsi =</span> <span class="fu">as.character</span>(mmsi),</span>
<span id="cb2-16"><a href="#cb2-16"></a>         <span class="at">flag_gfw =</span> <span class="fu">as.factor</span>(flag_gfw)) <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="#cb2-17"></a>  <span class="co">#finding proportion of boats that are self reported by country</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="fu">group_by</span>(flag_gfw) <span class="sc">%&gt;%</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="fu">mutate</span>(<span class="at">prop_self_rep =</span> <span class="fu">mean</span>(self_reported_fishing_vessel, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb2-20"><a href="#cb2-20"></a>         <span class="at">n_vessels =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>  <span class="co">#moving to column #4</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>  <span class="fu">relocate</span>(prop_self_rep, <span class="at">.after =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-23"><a href="#cb2-23"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-24"><a href="#cb2-24"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"fishing"</span>),</span>
<span id="cb2-25"><a href="#cb2-25"></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb2-26"><a href="#cb2-26"></a>               <span class="at">values_to =</span> <span class="st">"fishing_time"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-27"><a href="#cb2-27"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">str_remove</span>(year, <span class="st">"fishing_hours_"</span>))</span>
<span id="cb2-28"><a href="#cb2-28"></a></span>
<span id="cb2-29"><a href="#cb2-29"></a></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="co"># ---------------- Barchart Data --------------------</span></span>
<span id="cb2-31"><a href="#cb2-31"></a></span>
<span id="cb2-32"><a href="#cb2-32"></a>barchart_df <span class="ot">&lt;-</span> boats_clean <span class="sc">%&gt;%</span></span>
<span id="cb2-33"><a href="#cb2-33"></a>  <span class="fu">filter</span>(flag_gfw <span class="sc">==</span> <span class="st">"CHN"</span>,</span>
<span id="cb2-34"><a href="#cb2-34"></a>         <span class="sc">!</span><span class="fu">is.na</span>(self_reported_fishing_vessel)) <span class="sc">%&gt;%</span></span>
<span id="cb2-35"><a href="#cb2-35"></a>  <span class="co"># renaming vessels to other</span></span>
<span id="cb2-36"><a href="#cb2-36"></a>  <span class="fu">mutate</span>(<span class="at">vessel_class_gfw =</span> <span class="fu">ifelse</span>(vessel_class_gfw <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"trawlers"</span>, <span class="st">"fishing"</span>, <span class="st">"set_gillnets"</span>, <span class="st">"set_longlines"</span>, <span class="st">"fixed_gear"</span>), vessel_class_gfw, <span class="st">"other"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-37"><a href="#cb2-37"></a>  <span class="co"># finding the total number of vessesl by class and legality</span></span>
<span id="cb2-38"><a href="#cb2-38"></a>  <span class="fu">group_by</span>(mmsi, vessel_class_gfw) <span class="sc">%&gt;%</span></span>
<span id="cb2-39"><a href="#cb2-39"></a>  <span class="fu">summarise</span>(<span class="at">self_reported_fishing_vessel =</span> self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb2-40"><a href="#cb2-40"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-41"><a href="#cb2-41"></a>  <span class="fu">group_by</span>(vessel_class_gfw, self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb2-42"><a href="#cb2-42"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>())</span>
<span id="cb2-43"><a href="#cb2-43"></a></span>
<span id="cb2-44"><a href="#cb2-44"></a><span class="co"># -------------- Donut Chart Data-------------------</span></span>
<span id="cb2-45"><a href="#cb2-45"></a></span>
<span id="cb2-46"><a href="#cb2-46"></a><span class="co">#wrangling data for a donut chart</span></span>
<span id="cb2-47"><a href="#cb2-47"></a>donut_df <span class="ot">&lt;-</span> boats_clean <span class="sc">%&gt;%</span></span>
<span id="cb2-48"><a href="#cb2-48"></a>  <span class="fu">filter</span>(flag_gfw <span class="sc">==</span> <span class="st">"CHN"</span>,</span>
<span id="cb2-49"><a href="#cb2-49"></a>         <span class="sc">!</span><span class="fu">is.na</span>(self_reported_fishing_vessel)) <span class="sc">%&gt;%</span></span>
<span id="cb2-50"><a href="#cb2-50"></a>  <span class="fu">group_by</span>(mmsi, vessel_class_gfw) <span class="sc">%&gt;%</span></span>
<span id="cb2-51"><a href="#cb2-51"></a>  <span class="fu">summarise</span>(<span class="at">self_reported_fishing_vessel =</span> self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb2-52"><a href="#cb2-52"></a>  <span class="co"># filtering just distinct number of individual vessels</span></span>
<span id="cb2-53"><a href="#cb2-53"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-54"><a href="#cb2-54"></a>  <span class="fu">group_by</span>(self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb2-55"><a href="#cb2-55"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb2-56"><a href="#cb2-56"></a>  <span class="fu">mutate</span>(<span class="at">self_reported_fishing_vessel =</span> <span class="fu">ifelse</span>(self_reported_fishing_vessel, <span class="st">"Legal"</span>, <span class="st">"Illegal"</span>),</span>
<span id="cb2-57"><a href="#cb2-57"></a>         <span class="at">percentage =</span> <span class="fu">round</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">1</span>),</span>
<span id="cb2-58"><a href="#cb2-58"></a>         <span class="at">ymax =</span> <span class="fu">cumsum</span>(percentage),</span>
<span id="cb2-59"><a href="#cb2-59"></a>         <span class="at">ymin =</span> <span class="fu">lag</span>(ymax, <span class="at">default =</span> <span class="dv">0</span>),</span>
<span id="cb2-60"><a href="#cb2-60"></a>         <span class="at">labelPosition =</span> (ymax <span class="sc">+</span> ymin)<span class="sc">/</span><span class="dv">2</span>,</span>
<span id="cb2-61"><a href="#cb2-61"></a>         <span class="at">label =</span> <span class="fu">paste0</span>(percentage, <span class="st">"%"</span>))</span>
<span id="cb2-62"><a href="#cb2-62"></a></span>
<span id="cb2-63"><a href="#cb2-63"></a><span class="co"># finding the total count of all chinese fishing vessels</span></span>
<span id="cb2-64"><a href="#cb2-64"></a>total_count <span class="ot">&lt;-</span> <span class="fu">format</span>(<span class="fu">sum</span>(donut_df<span class="sc">$</span>count),</span>
<span id="cb2-65"><a href="#cb2-65"></a>                      <span class="at">big.mark =</span> <span class="st">","</span>)</span>
<span id="cb2-66"><a href="#cb2-66"></a></span>
<span id="cb2-67"><a href="#cb2-67"></a><span class="co"># ----------- Tree map data -----------------</span></span>
<span id="cb2-68"><a href="#cb2-68"></a></span>
<span id="cb2-69"><a href="#cb2-69"></a><span class="co"># wrangling top 10 countries by vessel count to compare</span></span>
<span id="cb2-70"><a href="#cb2-70"></a>top_10 <span class="ot">&lt;-</span> boats_clean <span class="sc">%&gt;%</span></span>
<span id="cb2-71"><a href="#cb2-71"></a>  <span class="fu">distinct</span>(mmsi, flag_gfw, self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb2-72"><a href="#cb2-72"></a>  <span class="fu">group_by</span>(flag_gfw) <span class="sc">%&gt;%</span></span>
<span id="cb2-73"><a href="#cb2-73"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb2-74"><a href="#cb2-74"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> count, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb2-75"><a href="#cb2-75"></a></span>
<span id="cb2-76"><a href="#cb2-76"></a><span class="co"># wrangling a data set for the treemap figure</span></span>
<span id="cb2-77"><a href="#cb2-77"></a>tree_df <span class="ot">&lt;-</span> boats_clean <span class="sc">%&gt;%</span></span>
<span id="cb2-78"><a href="#cb2-78"></a>  <span class="co"># filter to just top 10 countries</span></span>
<span id="cb2-79"><a href="#cb2-79"></a>  <span class="fu">filter</span>(flag_gfw <span class="sc">%in%</span> top_10<span class="sc">$</span>flag_gfw,</span>
<span id="cb2-80"><a href="#cb2-80"></a>         <span class="sc">!</span><span class="fu">is.na</span>(self_reported_fishing_vessel)) <span class="sc">%&gt;%</span></span>
<span id="cb2-81"><a href="#cb2-81"></a>  <span class="co"># only pull out distinct vessels</span></span>
<span id="cb2-82"><a href="#cb2-82"></a>  <span class="fu">distinct</span>(mmsi, flag_gfw, self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb2-83"><a href="#cb2-83"></a>  <span class="fu">group_by</span>(flag_gfw, self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb2-84"><a href="#cb2-84"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb2-85"><a href="#cb2-85"></a>  <span class="co"># rename to full country</span></span>
<span id="cb2-86"><a href="#cb2-86"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-87"><a href="#cb2-87"></a>    flag_gfw <span class="sc">==</span> <span class="st">"CHN"</span> <span class="sc">~</span> <span class="st">"China"</span>,</span>
<span id="cb2-88"><a href="#cb2-88"></a>    flag_gfw <span class="sc">==</span> <span class="st">"ESP"</span> <span class="sc">~</span> <span class="st">"Spain"</span>,</span>
<span id="cb2-89"><a href="#cb2-89"></a>    flag_gfw <span class="sc">==</span> <span class="st">"GBR"</span> <span class="sc">~</span> <span class="st">"UK"</span>,</span>
<span id="cb2-90"><a href="#cb2-90"></a>    flag_gfw <span class="sc">==</span> <span class="st">"ISL"</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"Ice-"</span>,<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"land"</span>),</span>
<span id="cb2-91"><a href="#cb2-91"></a>    flag_gfw <span class="sc">==</span> <span class="st">"ITA"</span> <span class="sc">~</span> <span class="st">"Italy"</span>,</span>
<span id="cb2-92"><a href="#cb2-92"></a>    flag_gfw <span class="sc">==</span> <span class="st">"JPN"</span> <span class="sc">~</span> <span class="st">"Japan"</span>,</span>
<span id="cb2-93"><a href="#cb2-93"></a>    flag_gfw <span class="sc">==</span> <span class="st">"KOR"</span> <span class="sc">~</span> <span class="st">"Korea"</span>,</span>
<span id="cb2-94"><a href="#cb2-94"></a>    flag_gfw <span class="sc">==</span> <span class="st">"NOR"</span> <span class="sc">~</span> <span class="st">"Norway"</span>,</span>
<span id="cb2-95"><a href="#cb2-95"></a>    flag_gfw <span class="sc">==</span> <span class="st">"TWN"</span> <span class="sc">~</span> <span class="st">"Taiwan"</span>,</span>
<span id="cb2-96"><a href="#cb2-96"></a>    flag_gfw <span class="sc">==</span> <span class="st">"USA"</span> <span class="sc">~</span> <span class="st">"USA"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="tree-map" class="level2">
<h2 class="anchored" data-anchor-id="tree-map">Tree Map</h2>
<p><em>Note: As in all plots, red represents legal and yellow represents illegal. I also did not include titles, subtitles, captions, or guides in any of the three stand along plots that I created as they are all going to be small pieces of a larger infographic in which these details will be communicated. However, it is critical to include these components to your visualization if they are stand alone and do not have the additional aid from the inforgraphic.</em></p>
<p>The first figure I want to create is a tree map that compares the total sizes of the top 10 countries’ illegal and legal fishing vessels using AIS between 2012 and 2020. This will answer my main question:</p>
<p><strong>How large are China’s illegal and legal fishing fleets using automatic identification system (AIS) compared to the next 9 largest countries?</strong></p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># making a tree map</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>tree_fig <span class="ot">&lt;-</span>  <span class="fu">ggplot</span>(tree_df, <span class="fu">aes</span>(<span class="at">area =</span> count, <span class="at">fill =</span> self_reported_fishing_vessel,</span>
<span id="cb3-3"><a href="#cb3-3"></a>                                 <span class="at">label =</span> self_reported_fishing_vessel, </span>
<span id="cb3-4"><a href="#cb3-4"></a>                                 <span class="at">subgroup =</span> country)) <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="co"># labs(title = "Comparing the World's 10 Largest Fishing Fleets") +</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#f4c430"</span>, <span class="st">"#b22222"</span>)) <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="fu">geom_treemap_subgroup_border</span>(<span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>  <span class="fu">geom_treemap_subgroup_text</span>(<span class="at">place =</span> <span class="st">"centre"</span>, <span class="at">grow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-10"><a href="#cb3-10"></a>                             <span class="at">alpha =</span> <span class="fl">0.7</span>, </span>
<span id="cb3-11"><a href="#cb3-11"></a>                             <span class="at">lineheight =</span> <span class="fl">0.3</span>,</span>
<span id="cb3-12"><a href="#cb3-12"></a>                             <span class="at">colour =</span> <span class="st">"white"</span>,</span>
<span id="cb3-13"><a href="#cb3-13"></a>                             <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-15"><a href="#cb3-15"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb3-16"><a href="#cb3-16"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb3-17"><a href="#cb3-17"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tree.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%" alt="Tree plot comparing the world's 10 largest legal and illegal fishing fleets using AIS between 2012-2020 by country where China's fleet dwarfs the next 9 countries combined."></p>
</figure>
</div>
</div>
</div>
</section>
<section id="donut-chart" class="level2">
<h2 class="anchored" data-anchor-id="donut-chart">Donut Chart</h2>
<p>My next plot will be a donut chart that answers our second question:</p>
<p><strong>What percentage of China’s fleet using AIS legally reported its fishing status between 2012-2020?</strong></p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Making a donut chart</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>donut <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> donut_df, <span class="fu">aes</span>(<span class="at">ymax=</span>ymax, <span class="at">ymin=</span>ymin, <span class="at">xmax=</span><span class="dv">4</span>, </span>
<span id="cb4-3"><a href="#cb4-3"></a>                                     <span class="at">xmin=</span><span class="dv">3</span>, <span class="at">fill =</span> self_reported_fishing_vessel)) <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="fu">geom_rect</span>() <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="co"># labeling percentages</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">geom_label</span>( <span class="at">x=</span><span class="fl">3.5</span>, <span class="fu">aes</span>(<span class="at">y=</span>labelPosition, <span class="at">label=</span>label), <span class="at">size=</span><span class="dv">20</span>,</span>
<span id="cb4-7"><a href="#cb4-7"></a>              <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb4-8"><a href="#cb4-8"></a>              <span class="at">label.size =</span> <span class="cn">NA</span>,</span>
<span id="cb4-9"><a href="#cb4-9"></a>              <span class="at">family =</span> <span class="st">"sen"</span>,</span>
<span id="cb4-10"><a href="#cb4-10"></a>              <span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb4-11"><a href="#cb4-11"></a>              <span class="at">lineheight =</span> <span class="fu">unit</span>(.<span class="dv">3</span>, <span class="st">"lines"</span>)) <span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>  <span class="co"># adding annotation for total number of vessels</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">'text'</span>, <span class="at">x =</span> <span class="fl">1.7</span>, <span class="at">y =</span> <span class="dv">1</span>, <span class="at">label =</span> <span class="fu">paste</span>(total_count, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"Vessels"</span>),</span>
<span id="cb4-14"><a href="#cb4-14"></a>           <span class="at">size =</span> <span class="dv">30</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">lineheight =</span> <span class="fu">unit</span>(.<span class="dv">3</span>, <span class="st">"lines"</span>), <span class="at">family =</span> <span class="st">"sen"</span>) <span class="sc">+</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#f4c430"</span>, <span class="st">"#b22222"</span>)) <span class="sc">+</span></span>
<span id="cb4-16"><a href="#cb4-16"></a>  <span class="fu">coord_polar</span>(<span class="at">theta=</span><span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb4-17"><a href="#cb4-17"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="fl">1.7</span>, <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb4-20"><a href="#cb4-20"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb4-21"><a href="#cb4-21"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="cn">NA</span>))</span>
<span id="cb4-22"><a href="#cb4-22"></a></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co"># making a donut plot with colored background for displaying individually</span></span>
<span id="cb4-24"><a href="#cb4-24"></a>donut_filled <span class="ot">&lt;-</span> donut <span class="sc">+</span></span>
<span id="cb4-25"><a href="#cb4-25"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb4-26"><a href="#cb4-26"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">color =</span> <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-layout-align="Donut chart showing percentages of legal and illegal Chinese fishing vessels where legal vessesl make up the 72.6% of the fleet and illegal vessels make up 27.4%. Data only included vessles recorded to have used AIS between 2012-2020.">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-Donut chart showing percentages of legal and illegal Chinese fishing vessels where legal vessesl make up the 72.6% of the fleet and illegal vessels make up 27.4%. Data only included vessles recorded to have used AIS between 2012-2020.">
<figure class="figure">
<p><img src="images/donut_filled.jpeg" class="img-fluid quarto-figure quarto-figure-Donut chart showing percentages of legal and illegal Chinese fishing vessels where vessesl make up the 72.6% fleet 27.4%. Data only included vessles recorded to have used AIS between 2012-2020. figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="barchart" class="level2">
<h2 class="anchored" data-anchor-id="barchart">Barchart</h2>
<p>My last plot will be a barchart answering the final question:</p>
<p><strong>What were the total number of illegal and legal fishing vessels by class using AIS between 2012-2020?</strong></p>
<p>I added value lables on here because I removed the x axis for simplicity in design. It important to make sure that as you modify or remove elements that you are making sure that information is not entirely lost as it will confuse the reader.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># making a barchart</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>barchart <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> barchart_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(vessel_class_gfw, count), </span>
<span id="cb5-3"><a href="#cb5-3"></a>                                           <span class="at">y =</span> count, <span class="at">fill =</span> self_reported_fishing_vessel)) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="co"># adding count text to each bar</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">comma</span>(count), <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.1</span>), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">20</span>,</span>
<span id="cb5-6"><a href="#cb5-6"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>),</span>
<span id="cb5-7"><a href="#cb5-7"></a>            <span class="at">family =</span> <span class="st">"sen"</span>) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Self Registered"</span>, </span>
<span id="cb5-11"><a href="#cb5-11"></a>       <span class="at">x =</span> <span class="st">""</span>, </span>
<span id="cb5-12"><a href="#cb5-12"></a>       <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#f4c430"</span>, <span class="st">"#b22222"</span>)) <span class="sc">+</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">30000</span>)) <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"trawlers"</span> <span class="ot">=</span> <span class="st">"Trawlers"</span>, </span>
<span id="cb5-16"><a href="#cb5-16"></a>                              <span class="st">"fishing"</span> <span class="ot">=</span> <span class="st">"Unknown"</span>, </span>
<span id="cb5-17"><a href="#cb5-17"></a>                              <span class="st">"set_longlines"</span> <span class="ot">=</span> <span class="st">"Longlines"</span>,</span>
<span id="cb5-18"><a href="#cb5-18"></a>                              <span class="st">"set_gillnets"</span> <span class="ot">=</span> <span class="st">"Gillnets"</span>, </span>
<span id="cb5-19"><a href="#cb5-19"></a>                              <span class="st">"other"</span> <span class="ot">=</span> <span class="st">"Mixed Other"</span>, </span>
<span id="cb5-20"><a href="#cb5-20"></a>                              <span class="st">"fixed_gear"</span> <span class="ot">=</span> <span class="st">"Fixed Gear"</span>)) <span class="sc">+</span></span>
<span id="cb5-21"><a href="#cb5-21"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb5-22"><a href="#cb5-22"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-23"><a href="#cb5-23"></a>    <span class="co"># note: need to make these fills as transparent for final figure when stitching together</span></span>
<span id="cb5-24"><a href="#cb5-24"></a>    <span class="co"># they are colored right now so we can show the bacgkround color in the individual plot</span></span>
<span id="cb5-25"><a href="#cb5-25"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb5-26"><a href="#cb5-26"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb5-27"><a href="#cb5-27"></a>    <span class="co"># axis </span></span>
<span id="cb5-28"><a href="#cb5-28"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb5-29"><a href="#cb5-29"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb5-30"><a href="#cb5-30"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">family =</span> <span class="st">"sen"</span>,<span class="at">size =</span> <span class="dv">48</span>, </span>
<span id="cb5-31"><a href="#cb5-31"></a>                               <span class="at">margin =</span> <span class="fu">margin</span>(<span class="sc">-</span><span class="dv">30</span>, <span class="sc">-</span><span class="dv">20</span>, <span class="sc">-</span><span class="dv">50</span>, <span class="dv">0</span>)),</span>
<span id="cb5-32"><a href="#cb5-32"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb5-33"><a href="#cb5-33"></a>    <span class="co"># legend</span></span>
<span id="cb5-34"><a href="#cb5-34"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb5-35"><a href="#cb5-35"></a>  )</span>
<span id="cb5-36"><a href="#cb5-36"></a></span>
<span id="cb5-37"><a href="#cb5-37"></a></span>
<span id="cb5-38"><a href="#cb5-38"></a><span class="co"># making a barchart with colored background for displaying individually</span></span>
<span id="cb5-39"><a href="#cb5-39"></a>barchart_filled <span class="ot">&lt;-</span> barchart <span class="sc">+</span></span>
<span id="cb5-40"><a href="#cb5-40"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb5-41"><a href="#cb5-41"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">color =</span> <span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/barchart_filled.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Barchart showing the abudnances of Chinese fishing vessels by class. Trawlers, long lines and gillnets are the most abundant known classes regardless of legality. Data only included vessles recorded to have used AIS between 2012-2020."></p>
</figure>
</div>
</div>
</div>
</section>
<section id="text-annotation" class="level2">
<h2 class="anchored" data-anchor-id="text-annotation">Text Annotation</h2>
<p>Now we are going to create some text annotation to this plot to explain exactly what AIS is and provide some context to guide the reader through our visuals. This step is very important as my plots do not have any titles or subtitles, so explaining missing links that explain the data and figures will be crucial for the reader to follow along:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># making annotation texts for the infographic </span></span>
<span id="cb6-2"><a href="#cb6-2"></a>quote <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"China boasts the world's largest fishing fleet, with over 73K vessels that utilized the Automatic Identification System (AIS) between 2012 and 2020. AIS reveals a vessel's location and fishing activities. AIS usage is mandatory for many larger vessels, but not all comply in broadcasting their fishing status. Approximately 27.4% of these vessels failed to broadcast their fishing status, indicating potential illegal fishing activities according to data from Global Fishing Watch. These vessels predominantly included: "</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a>boat_quote <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Trawlers: pull large nets across the sea floor "</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb6-5"><a href="#cb6-5"></a>                      <span class="st">"Longlines: pull long fishing lines through the water with multiple baited"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"                  hooks attatched to each single line"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb6-6"><a href="#cb6-6"></a>                      <span class="st">"Gillnets: pull large nets through the middle water column"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb6-7"><a href="#cb6-7"></a>                      <span class="st">"Fixed Gear: place fixed objects such as nets and traps tethered to buoys"</span>)</span>
<span id="cb6-8"><a href="#cb6-8"></a></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co"># making quotes a ggplot object</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>quote_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="dv">0</span>, <span class="at">xmax =</span> <span class="dv">1</span>, <span class="at">ymin =</span> <span class="fl">0.1</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span>  <span class="co"># Add blue background</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.03</span>, <span class="at">y =</span> .<span class="dv">73</span>, <span class="at">label =</span> <span class="fu">str_wrap</span>(quote, <span class="at">width =</span> <span class="dv">80</span>),</span>
<span id="cb6-13"><a href="#cb6-13"></a>           <span class="at">family =</span> <span class="st">"sen"</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">16</span>, </span>
<span id="cb6-14"><a href="#cb6-14"></a>           <span class="at">lineheight =</span> <span class="fl">0.32</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.03</span>, <span class="at">y =</span> .<span class="dv">28</span>, <span class="at">label =</span> boat_quote,</span>
<span id="cb6-16"><a href="#cb6-16"></a>           <span class="at">family =</span> <span class="st">"sen"</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">18</span>,</span>
<span id="cb6-17"><a href="#cb6-17"></a>           <span class="at">lineheight =</span> <span class="fl">0.32</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="fl">0.4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb6-18"><a href="#cb6-18"></a>  </span>
<span id="cb6-19"><a href="#cb6-19"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb6-20"><a href="#cb6-20"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb6-21"><a href="#cb6-21"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="base-infographic" class="level2">
<h2 class="anchored" data-anchor-id="base-infographic">Base Infographic</h2>
<p>We are now getting towards the end. I want to make a base template in <code>ggplot2</code> that will serve as the foundation of my infographic with the title, subtitle, and caption. I do so by creating an empty <code>ggplot()</code> object and adding labels to it along with with my github information in the caption. I also set the color background here and adjust the margins:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Base template ggplot for infographic </span></span>
<span id="cb7-2"><a href="#cb7-2"></a>g_base <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="co"># geom_segment(aes(x = .5, y = .5, xend = .5, yend = 0.6), color = "black") +</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">labs</span>( </span>
<span id="cb7-5"><a href="#cb7-5"></a>    <span class="at">title =</span> <span class="st">"The World's Largest Fishing Fleet"</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>    <span class="at">subtitle =</span> <span class="st">"China's &lt;span</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="st">style='color:#f4c430;font-size:78pt;'&gt;**Illegal**&lt;/span&gt; and &lt;span style='color:#b22222;font-size:78pt;'&gt;**Legal**&lt;/span&gt; Fishing Vessels Using AIS (2012-2020)"</span>,</span>
<span id="cb7-8"><a href="#cb7-8"></a> <span class="at">caption =</span> gh_caption) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>  <span class="fu">theme</span>(</span>
<span id="cb7-11"><a href="#cb7-11"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb7-12"><a href="#cb7-12"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"play"</span>, <span class="at">size =</span> <span class="dv">60</span>, </span>
<span id="cb7-13"><a href="#cb7-13"></a>                        <span class="at">lineheight =</span> <span class="fl">0.3</span>, <span class="at">colour =</span> <span class="st">"white"</span>),</span>
<span id="cb7-14"><a href="#cb7-14"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">colour =</span> pal[<span class="st">"bg"</span>]),</span>
<span id="cb7-15"><a href="#cb7-15"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">128</span>,<span class="at">face =</span> <span class="st">"bold"</span>, </span>
<span id="cb7-16"><a href="#cb7-16"></a>                              <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>)),</span>
<span id="cb7-17"><a href="#cb7-17"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">family =</span> <span class="st">"sen"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, </span>
<span id="cb7-18"><a href="#cb7-18"></a>                                     <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>)),</span>
<span id="cb7-19"><a href="#cb7-19"></a>    <span class="at">plot.caption =</span> <span class="fu">element_markdown</span>(<span class="at">family =</span> <span class="st">"sen"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, </span>
<span id="cb7-20"><a href="#cb7-20"></a>                                     <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>)),</span>
<span id="cb7-21"><a href="#cb7-21"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>, <span class="at">t =</span> <span class="dv">50</span>, <span class="at">r =</span> <span class="dv">50</span>, <span class="at">l =</span> <span class="dv">50</span>),</span>
<span id="cb7-22"><a href="#cb7-22"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>() </span>
<span id="cb7-23"><a href="#cb7-23"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="adding-creativity" class="level2">
<h2 class="anchored" data-anchor-id="adding-creativity">Adding Creativity</h2>
<p>Lastly, we want to spice up our figure and add some fishy themed elements to make it pop out and not just look like a bunch of statistics. I just grabbed and edited some basic marine-themed PNG’s from google which can go a long way. It is important to make sure that these visuals are not overpowering your infrographic or too distracting from the figures:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># read in PNG images for spicing up the grpahics</span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co"># hooks</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>hookstem_donut <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/hookstem_donut.png"</span>))</span>
<span id="cb8-5"><a href="#cb8-5"></a>hook_donut <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/hook_donut.png"</span>))</span>
<span id="cb8-6"><a href="#cb8-6"></a>hookstem_bar <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/hookstem_bar.png"</span>))</span>
<span id="cb8-7"><a href="#cb8-7"></a>hook_bar <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/hook_bar.png"</span>))</span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co"># fish banner</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>fish_school <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/fish_school.png"</span>))</span>
<span id="cb8-10"><a href="#cb8-10"></a></span>
<span id="cb8-11"><a href="#cb8-11"></a></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co"># donut plot hooks</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>hookstem_donut_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(hookstem_donut), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb8-16"><a href="#cb8-16"></a></span>
<span id="cb8-17"><a href="#cb8-17"></a>hook_donut_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(hook_donut), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb8-20"><a href="#cb8-20"></a></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="co"># barchart hooks</span></span>
<span id="cb8-22"><a href="#cb8-22"></a>hookstem_bar_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb8-23"><a href="#cb8-23"></a>  <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(hookstem_bar), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb8-24"><a href="#cb8-24"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb8-25"><a href="#cb8-25"></a></span>
<span id="cb8-26"><a href="#cb8-26"></a>hook_bar_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb8-27"><a href="#cb8-27"></a>  <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(hook_bar), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb8-28"><a href="#cb8-28"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb8-29"><a href="#cb8-29"></a></span>
<span id="cb8-30"><a href="#cb8-30"></a><span class="co"># fishing hook line</span></span>
<span id="cb8-31"><a href="#cb8-31"></a>line1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> .<span class="dv">5</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> .<span class="dv">5</span>, <span class="at">yend =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"grey2"</span>, <span class="at">linewidth=</span><span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb8-32"><a href="#cb8-32"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb8-33"><a href="#cb8-33"></a></span>
<span id="cb8-34"><a href="#cb8-34"></a><span class="co"># fish banner</span></span>
<span id="cb8-35"><a href="#cb8-35"></a>fish_school_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span>   <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(fish_school), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb8-36"><a href="#cb8-36"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="stitching-together" class="level2">
<h2 class="anchored" data-anchor-id="stitching-together">Stitching Together</h2>
<p>We are now at the final step now that all the figures, text, and infographic base have been created. I am using the <code>patchwork</code> package to add layers of inset elements/plots (using <code>inset_element()</code> so that our figures and creative elements are nicely stacked. <em>Note: I had to adjust the <code>fill</code> to be <code>NA</code> for the plots in order to get them to not block one another when stacking my inset elements.</em></p>
<p>We are then left with the final result:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># adding together all elements of infographic</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>final_fig <span class="ot">&lt;-</span> g_base <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="co"># fish banner</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="fu">inset_element</span>(fish_school_gg, <span class="at">left =</span> <span class="sc">-</span><span class="fl">0.05</span>, <span class="at">right =</span> <span class="fl">1.05</span>, <span class="at">top =</span> <span class="fl">0.4</span>, <span class="at">bottom =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="co"># fishing line </span></span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="fu">inset_element</span>(line1, <span class="at">left =</span> .<span class="dv">155</span>, <span class="at">right =</span> .<span class="dv">17</span>, <span class="at">top =</span> .<span class="dv">8</span>, <span class="at">bottom =</span> <span class="fl">0.425</span>) <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>  <span class="co"># fishing line</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>  <span class="fu">inset_element</span>(line1, <span class="at">left =</span> .<span class="dv">73</span>, <span class="at">right =</span> .<span class="dv">74</span>, <span class="at">top =</span> .<span class="dv">8</span>, <span class="at">bottom =</span> <span class="fl">0.34</span>) <span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>  <span class="co"># tree map</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="fu">inset_element</span>(tree_fig, <span class="at">left =</span> <span class="dv">0</span>, <span class="at">right =</span> <span class="dv">1</span>, <span class="at">top =</span> <span class="dv">1</span>, <span class="at">bottom =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>  <span class="co"># hookstem donut </span></span>
<span id="cb9-12"><a href="#cb9-12"></a>  <span class="fu">inset_element</span>(hookstem_donut_gg, <span class="at">left =</span> <span class="fl">0.658</span>, <span class="at">right =</span> .<span class="dv">748</span>, <span class="at">top =</span> <span class="fl">0.405</span>, <span class="at">bottom =</span> .<span class="dv">191</span>) <span class="sc">+</span></span>
<span id="cb9-13"><a href="#cb9-13"></a>  <span class="co"># barchart </span></span>
<span id="cb9-14"><a href="#cb9-14"></a>  <span class="fu">inset_element</span>(barchart, <span class="at">left =</span> <span class="sc">-</span><span class="fl">0.075</span>, <span class="at">right =</span> <span class="dv">1</span>, <span class="at">top =</span> <span class="fl">0.35</span>, <span class="at">bottom =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>  <span class="co"># donut chart</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>  <span class="fu">inset_element</span>(donut, <span class="at">left =</span> <span class="fl">0.45</span>, <span class="at">right =</span> <span class="dv">1</span>, <span class="at">top =</span> <span class="fl">0.3</span>, <span class="at">bottom =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb9-17"><a href="#cb9-17"></a>  <span class="co"># donut bar hooks</span></span>
<span id="cb9-18"><a href="#cb9-18"></a>  <span class="fu">inset_element</span>(hookstem_bar_gg, <span class="at">left =</span> <span class="fl">0.15</span>, <span class="at">right =</span> .<span class="dv">25</span>, <span class="at">top =</span> <span class="fl">0.447</span>, <span class="at">bottom =</span> .<span class="dv">295</span>) <span class="sc">+</span></span>
<span id="cb9-19"><a href="#cb9-19"></a>  <span class="fu">inset_element</span>(hook_bar_gg, <span class="at">left =</span> <span class="fl">0.14</span>, <span class="at">right =</span> .<span class="dv">24</span>, <span class="at">top =</span> <span class="fl">0.43</span>, <span class="at">bottom =</span> .<span class="dv">27</span>) <span class="sc">+</span></span>
<span id="cb9-20"><a href="#cb9-20"></a>  <span class="co"># bar donut hooks</span></span>
<span id="cb9-21"><a href="#cb9-21"></a>  <span class="fu">inset_element</span>(hook_donut_gg, <span class="at">left =</span> <span class="fl">0.66</span>, <span class="at">right =</span> .<span class="dv">76</span>, <span class="at">top =</span> <span class="fl">0.401</span>, <span class="at">bottom =</span> .<span class="dv">151</span>) <span class="sc">+</span></span>
<span id="cb9-22"><a href="#cb9-22"></a>  <span class="co"># quotes</span></span>
<span id="cb9-23"><a href="#cb9-23"></a>  <span class="fu">inset_element</span>(quote_gg, <span class="at">left =</span> <span class="sc">-</span>.<span class="dv">04</span>, <span class="at">right =</span> <span class="fl">1.04</span>, <span class="at">top =</span> .<span class="dv">7</span>, <span class="at">bottom =</span> .<span class="dv">35</span>) <span class="sc">+</span></span>
<span id="cb9-24"><a href="#cb9-24"></a>  <span class="co"># annotations </span></span>
<span id="cb9-25"><a href="#cb9-25"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb9-26"><a href="#cb9-26"></a>    <span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb9-27"><a href="#cb9-27"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">colour =</span> pal[<span class="st">"bg"</span>])))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/final_fig.jpeg" class="img-fluid figure-img" width="1500"></p>
<figcaption>Infographic showing the the relative size of China’s fishing fleet compared to the nex 9 largest countries’ fishing fleets, total number of fishing vessles by class, and percent of illegal and legal vessels. 27.4% of the vessels were reported to be illegal with trawlers, longlines, and gillnets making up the largest portion of vessels. Data represents legal (red) and illegal (yellow) fishing vessels using AIS between 2012-2020.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="design-elements" class="level2">
<h2 class="anchored" data-anchor-id="design-elements">Design Elements:</h2>
<p>And that is how you make an infographic in <code>ggplot2</code>! There are many ways in which you can take this, but this is one effective and simple way that worked for me. It is important that you consider design elements as you start planning your infographic. Some of the primary design elements that I considered when creating this infographic were:</p>
<p><strong>1) Graphic Forms:</strong> I ended up using a tree map, donut chart, and barchart to answer the three questions listed. While these plots are not necessarily considered <em>fancy</em>, they really allowed me to focus on visualizing the data I wanted to portray effectively, simply, and artistically. I wanted to focus on big picture trends/information which these plots allowed me to do. Sometimes keeping it more simple and focusing on aesthetics allowes for a better portrayal of your take home messages.</p>
<p><strong>2) Text:</strong> I kept my title and subtitle at one line each to ensure the text was not overwhelming for the reader and remained concise. I kept the central annotation in the middle of the infographic all in one place instead of cutting it up into smaller pieces around the graphic so the reader would not have to move their eyes as much to get the bulk of the information. Cutting down on axes text using <code>theme_void()</code> for each plot and removing bars/labels when possible really simplified the infographic and llowed for easier interpretion of the figures.</p>
<p><strong>3) Themes:</strong> I set a blue/grey background to show a deep sea feel and to also allow the gold and yellow to pop out a bit more. I wanted to create a maritime feel to the infographic, so I added some fishhooks to hold onto the plots and also some fish swimming around at the bottom. I also utilized a light blue text box in the text annotation to highlight information within the ocean theme.</p>
<p><strong>4) Colors:</strong>I used red and gold throughout the inforgaphic as they are the colors of the Chinese flag. Red represents “legal” and yellow is “illegal” (as annotated in the subtitle acting as a key). While these two colors are not my favorite, it added a layer of uniqueness to the theme that made the colors a bit more meaningful.</p>
<p><strong>5) Typography:</strong> I used two different fonts here: <em>Playfair Display</em> for the title and <em>Sen</em> for the text. These two fonts run well together, are clear, and fit the theme of the infographic I was creating. <em>Playfair Display</em> was used for the title and <em>Sen</em> was used for mos other text text. It is simple but does not look boring.</p>
<p><strong>6) General Design:</strong> The general design here was to start with the big picture tree map comparing the relative size of China’s fleet to the next 9 countries’ fleets. It then went into the text annotation which explains the purpose/background of the infographic. After this is set, the reader then goes into the nitty gritty where they explore the percentage and abundances of vessels by class and legality. It is suppose to flow from big picture to specifics with text in the middle to guide the reader. I used modest spacing between figures, but the text is a bit tight as a lot needed to be explained regarding the AIS system which couldn’t be graphically shown.</p>
<p><strong>7) Data Contextualization:</strong> I really focused on the data contextualization through the central annotation. because I removed axes and titles, it was key to have the primary contextualization in words to guide the reader. There are some things like the AIS system that could not be explained in the data, so I put it into context verbally. I also explained some uncertainty around what illegal vs legal vessels are, and lastly that these total vessels are not ALL of the vessels in the fleet but rather just the ones using AIS. Explaining this in the text annotation allowed me to bridge these gaps not seen in the figures.</p>
<p><strong>8) Centering Primary message:</strong> I did so by placing the tee map first which really gets at the big question of how big is China’s illegal and legal fishing fleet? I tried to make this the big and central aspect of the infographic as I feel like the tree map carries a lot of weight even though it has a simple design. The sheer size of China’s fleet comapred to the top next 9 countries realy stands out and serves as a powerful statement right off the bat.</p>
<p><strong>9) Accessibility:</strong> In general, red, gold, and grey/blue are not problematic color schemes for color blindness to what I found. Furthermore, the background contrast is strong against the red and gold, so the color scheme is onto a big concern for this. Because I relied heavily on red in this, I did not use any green to ensure that red/green colorblindness (the most common form) was not an issue here.</p>
<p><strong>10) Diversity Equity Inclusion (DEI):</strong> While my infographic does not directly address DEI in the data itself, I tried to be mindful in the way that I portrayed China in this to avoid creating negative emotion towards the country. It was challenging to show this data accurately without painting China as the an environmental terrorist. Phrasing the questions and context more factually and less opinionated helps to avoid negative feelings.</p>


<!-- -->

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{hunter2024,
  author = {Hunter, Raymond},
  title = {The {World’s} {Largest} {Fishing} {Fleet}},
  date = {2024-03-06},
  url = {</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-hunter2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Hunter, Raymond. 2024. <span>“The World’s Largest Fishing Fleet.”</span>
March 6, 2024. <a href="<https://ramhunte.github.io/blogs/china_fishing/">&lt;https://ramhunte.github.io/blogs/china_fishing/</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb10" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">---</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="an">title:</span><span class="co"> "The World's Largest Fishing Fleet"</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="an">description:</span><span class="co"> "China's Illegal and Legal Fishing Vessels Using AIS (2012-2020)"</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="an">author:</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">  - name: Raymond Hunter </span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">    url: &lt;https://ramhunte.github.io/</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="an">date:</span><span class="co"> 3-06-2024</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co"># bibliography: references.bib</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="an">citation:</span><span class="co"> </span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">  url: &lt;https://ramhunte.github.io/blogs/china_fishing/</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co"># image: copepod.jpg</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="an">categories:</span><span class="co"> [Quarto, R, DataViz] # self-defined categories</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">  html: </span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="co">    code-fold: show </span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">    code-copy: true </span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">    code-summary: "code" </span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">    code-line-numbers: true </span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">    code-tools: true </span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co">    code-block-border-left: true</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co">    # embed-resources: true</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="co">    warning: false</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="co">    message: false</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="an">draft:</span><span class="co"> false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!</span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="co">---</span></span>
<span id="cb10-27"><a href="#cb10-27"></a></span>
<span id="cb10-28"><a href="#cb10-28"></a><span class="co">[</span><span class="ot">Github Project Repository</span><span class="co">](https://github.com/ramhunte/Hunter-eds240-HW4)</span></span>
<span id="cb10-29"><a href="#cb10-29"></a></span>
<span id="cb10-30"><a href="#cb10-30"></a><span class="fu">## Introduction</span></span>
<span id="cb10-31"><a href="#cb10-31"></a></span>
<span id="cb10-32"><a href="#cb10-32"></a>This blog post is intended to show how to create an infographic from start to finish while considering 10 different design elements along the way: *graphic forms, text, themes, colors, typography, general design, data contextualization, primary message, accessibility, and diversity, equity, and inclusion (DEI)*. I used publically available data provided by [Global Fishing Watch (GFW)](https://globalfishingwatch.org/) to investigate and compare different aspects of China's illegal and legal fishing fleets. While showing figures and plots individually has its relevance, stitching together a story through multiple visualizations and text by creating an *infographic* can be a powerful tool. It allows the reader to walk through an oftentimes artistic thought process or an idea in multiple steps rather than interperet a stand alone figure. However, it is improtant to keep in minds the draw backs that can come with infographics such as confusing the reader through too much complext visualization. Here, I will walk you through how I created an artistic, simple, yet compelling story on China's fishing vessels through a tree map, donut chart, and barchart.</span>
<span id="cb10-33"><a href="#cb10-33"></a></span>
<span id="cb10-34"><a href="#cb10-34"></a><span class="fu">## About the Data</span></span>
<span id="cb10-35"><a href="#cb10-35"></a></span>
<span id="cb10-36"><a href="#cb10-36"></a>This data set I used is publicly available on the <span class="co">[</span><span class="ot">Global Fishing Watch (Data Link)</span><span class="co">](https://globalfishingwatch.org/data-download/datasets/public-fishing-effort)</span> website. The website contains a number of different data sets on global fishing vessels with the goal of trying highlighting illegal fishing vessel activity. The specific data set I used was called <span class="in">`fishing-vessels-v2.csv`</span> which is the most up-to-date public data set on predicted legal/illegal fishing vessel status. It was generated by GFW using machine learning to predict which vessels were actively fishing regardless of whether or not they identified as a legal fishing vessel. The data identifies global fishing vessels that used Automatic Identification System (AIS) from 2012-2020 by country. It contains a number of different variables describing the fishing vessel class, engine power, length, weight, fishing time by year, country, and whether or not it was a self reported AIS fishing vessel. This data allows us to find which vessel classes by country are using AIS around the globe and report whether they are operating legally or illegally. I primarily focused on using the variables <span class="in">`mmsi`</span> (the maritime mobile service identity or vessel identification number), <span class="in">`flag_gfw`</span> (the country the vessel represents), <span class="in">`vessel_class_gfw`</span> (the predicted vessel class), and <span class="in">`self_reported_fishing_vessel`</span> (whether the vessel broadcasts itself as a fishing vessel using AIS) as my variables of interest.</span>
<span id="cb10-37"><a href="#cb10-37"></a></span>
<span id="cb10-38"><a href="#cb10-38"></a><span class="fu">## Questions</span></span>
<span id="cb10-39"><a href="#cb10-39"></a></span>
<span id="cb10-40"><a href="#cb10-40"></a>I really wanted to look at China's illegal and legal fishing vessels at a broad scale to compare across countries and identify dominant fishing vessel classes within the fleets. I asked the following questions to do so:</span>
<span id="cb10-41"><a href="#cb10-41"></a></span>
<span id="cb10-42"><a href="#cb10-42"></a>**1) How large are China’s illegal and legal fishing fleets using automatic identification system (AIS) compared to the next 9 largest countries'?**</span>
<span id="cb10-43"><a href="#cb10-43"></a></span>
<span id="cb10-44"><a href="#cb10-44"></a>**2) What percentage of China's fleet using AIS legally reported its fishing status between 2012-2020?**</span>
<span id="cb10-45"><a href="#cb10-45"></a></span>
<span id="cb10-46"><a href="#cb10-46"></a>**3) What were the total number of illegal and legal fishing vessels by class using AIS between 2012-2020?**</span>
<span id="cb10-47"><a href="#cb10-47"></a></span>
<span id="cb10-48"><a href="#cb10-48"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb10-49"><a href="#cb10-49"></a><span class="in"># setting root directory to HW assignment to reduce duplicating </span></span>
<span id="cb10-50"><a href="#cb10-50"></a><span class="in">rootdir &lt;- ("/Users/rayhunter/Documents/Bren/Past_Courses/EDS_240/HW/Hunter-eds240-HW4")</span></span>
<span id="cb10-51"><a href="#cb10-51"></a><span class="in">```</span></span>
<span id="cb10-52"><a href="#cb10-52"></a></span>
<span id="cb10-53"><a href="#cb10-53"></a><span class="fu">## Set up</span></span>
<span id="cb10-54"><a href="#cb10-54"></a></span>
<span id="cb10-55"><a href="#cb10-55"></a>Here I loaded some packages, imported some fonts and icons, and picked some colors for the theme of the infographic:</span>
<span id="cb10-56"><a href="#cb10-56"></a></span>
<span id="cb10-57"><a href="#cb10-57"></a><span class="in">```{r set up}</span></span>
<span id="cb10-58"><a href="#cb10-58"></a><span class="in"># loading necessary packages</span></span>
<span id="cb10-59"><a href="#cb10-59"></a><span class="in">library(tidyverse)</span></span>
<span id="cb10-60"><a href="#cb10-60"></a><span class="in">library(janitor)</span></span>
<span id="cb10-61"><a href="#cb10-61"></a><span class="in">library(showtext) # for grabbing fonts</span></span>
<span id="cb10-62"><a href="#cb10-62"></a><span class="in">library(png)</span></span>
<span id="cb10-63"><a href="#cb10-63"></a><span class="in">library(grid)</span></span>
<span id="cb10-64"><a href="#cb10-64"></a><span class="in">library(ggpubr)</span></span>
<span id="cb10-65"><a href="#cb10-65"></a><span class="in">library(patchwork)</span></span>
<span id="cb10-66"><a href="#cb10-66"></a><span class="in">library(treemapify)</span></span>
<span id="cb10-67"><a href="#cb10-67"></a><span class="in">library(ggtext)</span></span>
<span id="cb10-68"><a href="#cb10-68"></a><span class="in">library(glue)</span></span>
<span id="cb10-69"><a href="#cb10-69"></a><span class="in">library(here)</span></span>
<span id="cb10-70"><a href="#cb10-70"></a></span>
<span id="cb10-71"><a href="#cb10-71"></a><span class="in"># custom icons and fonts fonts </span></span>
<span id="cb10-72"><a href="#cb10-72"></a><span class="in">font_add(family = "Font Awesome 6 Brands",</span></span>
<span id="cb10-73"><a href="#cb10-73"></a><span class="in">         regular = here(rootdir, "otfs/Font-Awesome-6-Brands-Regular-400.otf"))</span></span>
<span id="cb10-74"><a href="#cb10-74"></a><span class="in">font_add_google(name = "Sen", </span></span>
<span id="cb10-75"><a href="#cb10-75"></a><span class="in">                family = "sen")</span></span>
<span id="cb10-76"><a href="#cb10-76"></a><span class="in">font_add_google(name = "Playfair Display", </span></span>
<span id="cb10-77"><a href="#cb10-77"></a><span class="in">                family = "play")</span></span>
<span id="cb10-78"><a href="#cb10-78"></a><span class="in">showtext_auto() # for importing fonts</span></span>
<span id="cb10-79"><a href="#cb10-79"></a></span>
<span id="cb10-80"><a href="#cb10-80"></a><span class="in"># github icon</span></span>
<span id="cb10-81"><a href="#cb10-81"></a><span class="in">github_icon &lt;- "&amp;#xf09b"</span></span>
<span id="cb10-82"><a href="#cb10-82"></a><span class="in">github_username &lt;- "ramhunte"</span></span>
<span id="cb10-83"><a href="#cb10-83"></a><span class="in">gh_caption &lt;- glue::glue(</span></span>
<span id="cb10-84"><a href="#cb10-84"></a><span class="in">  "&lt;span style='font-family:\"Font Awesome 6 Brands\";'&gt;{github_icon};&lt;/span&gt;</span></span>
<span id="cb10-85"><a href="#cb10-85"></a><span class="in">  &lt;span style='color: white'&gt;{github_username}&lt;/span&gt;"</span></span>
<span id="cb10-86"><a href="#cb10-86"></a><span class="in">  )</span></span>
<span id="cb10-87"><a href="#cb10-87"></a></span>
<span id="cb10-88"><a href="#cb10-88"></a><span class="in"># custom color palette</span></span>
<span id="cb10-89"><a href="#cb10-89"></a><span class="in">pal &lt;- c(light_text = "#f4c430",</span></span>
<span id="cb10-90"><a href="#cb10-90"></a><span class="in">         dark_text = "#b22222",</span></span>
<span id="cb10-91"><a href="#cb10-91"></a><span class="in">         bg = "#516776")</span></span>
<span id="cb10-92"><a href="#cb10-92"></a></span>
<span id="cb10-93"><a href="#cb10-93"></a><span class="in">```</span></span>
<span id="cb10-94"><a href="#cb10-94"></a></span>
<span id="cb10-95"><a href="#cb10-95"></a><span class="fu">## Data Wrangling</span></span>
<span id="cb10-96"><a href="#cb10-96"></a></span>
<span id="cb10-97"><a href="#cb10-97"></a>Before I can create any plots, I need to wrangle and clean the data so that it can be used for the three different plots:</span>
<span id="cb10-98"><a href="#cb10-98"></a></span>
<span id="cb10-101"><a href="#cb10-101"></a><span class="in">```{r}</span></span>
<span id="cb10-102"><a href="#cb10-102"></a><span class="co"># Cleaning and warngling data </span></span>
<span id="cb10-103"><a href="#cb10-103"></a></span>
<span id="cb10-104"><a href="#cb10-104"></a><span class="co"># master data sheet</span></span>
<span id="cb10-105"><a href="#cb10-105"></a>boats <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(rootdir, <span class="st">"data/fishing-vessels-v2.csv"</span>))</span>
<span id="cb10-106"><a href="#cb10-106"></a></span>
<span id="cb10-107"><a href="#cb10-107"></a><span class="co"># clean sheet</span></span>
<span id="cb10-108"><a href="#cb10-108"></a>boats_clean <span class="ot">&lt;-</span> boats <span class="sc">%&gt;%</span></span>
<span id="cb10-109"><a href="#cb10-109"></a>  <span class="co">#cleaning names</span></span>
<span id="cb10-110"><a href="#cb10-110"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-111"><a href="#cb10-111"></a>  <span class="co"># selecting specific columns</span></span>
<span id="cb10-112"><a href="#cb10-112"></a>  <span class="fu">select</span>(mmsi, flag_gfw, vessel_class_gfw, tonnage_gt_gfw, self_reported_fishing_vessel,  fishing_hours_2012<span class="sc">:</span>fishing_hours_2020) <span class="sc">%&gt;%</span></span>
<span id="cb10-113"><a href="#cb10-113"></a>  <span class="co"># filtering out na values</span></span>
<span id="cb10-114"><a href="#cb10-114"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(flag_gfw)) <span class="sc">%&gt;%</span></span>
<span id="cb10-115"><a href="#cb10-115"></a>  <span class="co"># changing class of variables</span></span>
<span id="cb10-116"><a href="#cb10-116"></a>  <span class="fu">mutate</span>(<span class="at">mmsi =</span> <span class="fu">as.character</span>(mmsi),</span>
<span id="cb10-117"><a href="#cb10-117"></a>         <span class="at">flag_gfw =</span> <span class="fu">as.factor</span>(flag_gfw)) <span class="sc">%&gt;%</span></span>
<span id="cb10-118"><a href="#cb10-118"></a>  <span class="co">#finding proportion of boats that are self reported by country</span></span>
<span id="cb10-119"><a href="#cb10-119"></a>  <span class="fu">group_by</span>(flag_gfw) <span class="sc">%&gt;%</span></span>
<span id="cb10-120"><a href="#cb10-120"></a>  <span class="fu">mutate</span>(<span class="at">prop_self_rep =</span> <span class="fu">mean</span>(self_reported_fishing_vessel, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-121"><a href="#cb10-121"></a>         <span class="at">n_vessels =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb10-122"><a href="#cb10-122"></a>  <span class="co">#moving to column #4</span></span>
<span id="cb10-123"><a href="#cb10-123"></a>  <span class="fu">relocate</span>(prop_self_rep, <span class="at">.after =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-124"><a href="#cb10-124"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-125"><a href="#cb10-125"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"fishing"</span>),</span>
<span id="cb10-126"><a href="#cb10-126"></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb10-127"><a href="#cb10-127"></a>               <span class="at">values_to =</span> <span class="st">"fishing_time"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-128"><a href="#cb10-128"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">str_remove</span>(year, <span class="st">"fishing_hours_"</span>))</span>
<span id="cb10-129"><a href="#cb10-129"></a></span>
<span id="cb10-130"><a href="#cb10-130"></a></span>
<span id="cb10-131"><a href="#cb10-131"></a><span class="co"># ---------------- Barchart Data --------------------</span></span>
<span id="cb10-132"><a href="#cb10-132"></a></span>
<span id="cb10-133"><a href="#cb10-133"></a>barchart_df <span class="ot">&lt;-</span> boats_clean <span class="sc">%&gt;%</span></span>
<span id="cb10-134"><a href="#cb10-134"></a>  <span class="fu">filter</span>(flag_gfw <span class="sc">==</span> <span class="st">"CHN"</span>,</span>
<span id="cb10-135"><a href="#cb10-135"></a>         <span class="sc">!</span><span class="fu">is.na</span>(self_reported_fishing_vessel)) <span class="sc">%&gt;%</span></span>
<span id="cb10-136"><a href="#cb10-136"></a>  <span class="co"># renaming vessels to other</span></span>
<span id="cb10-137"><a href="#cb10-137"></a>  <span class="fu">mutate</span>(<span class="at">vessel_class_gfw =</span> <span class="fu">ifelse</span>(vessel_class_gfw <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"trawlers"</span>, <span class="st">"fishing"</span>, <span class="st">"set_gillnets"</span>, <span class="st">"set_longlines"</span>, <span class="st">"fixed_gear"</span>), vessel_class_gfw, <span class="st">"other"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-138"><a href="#cb10-138"></a>  <span class="co"># finding the total number of vessesl by class and legality</span></span>
<span id="cb10-139"><a href="#cb10-139"></a>  <span class="fu">group_by</span>(mmsi, vessel_class_gfw) <span class="sc">%&gt;%</span></span>
<span id="cb10-140"><a href="#cb10-140"></a>  <span class="fu">summarise</span>(<span class="at">self_reported_fishing_vessel =</span> self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb10-141"><a href="#cb10-141"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-142"><a href="#cb10-142"></a>  <span class="fu">group_by</span>(vessel_class_gfw, self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb10-143"><a href="#cb10-143"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>())</span>
<span id="cb10-144"><a href="#cb10-144"></a></span>
<span id="cb10-145"><a href="#cb10-145"></a><span class="co"># -------------- Donut Chart Data-------------------</span></span>
<span id="cb10-146"><a href="#cb10-146"></a></span>
<span id="cb10-147"><a href="#cb10-147"></a><span class="co">#wrangling data for a donut chart</span></span>
<span id="cb10-148"><a href="#cb10-148"></a>donut_df <span class="ot">&lt;-</span> boats_clean <span class="sc">%&gt;%</span></span>
<span id="cb10-149"><a href="#cb10-149"></a>  <span class="fu">filter</span>(flag_gfw <span class="sc">==</span> <span class="st">"CHN"</span>,</span>
<span id="cb10-150"><a href="#cb10-150"></a>         <span class="sc">!</span><span class="fu">is.na</span>(self_reported_fishing_vessel)) <span class="sc">%&gt;%</span></span>
<span id="cb10-151"><a href="#cb10-151"></a>  <span class="fu">group_by</span>(mmsi, vessel_class_gfw) <span class="sc">%&gt;%</span></span>
<span id="cb10-152"><a href="#cb10-152"></a>  <span class="fu">summarise</span>(<span class="at">self_reported_fishing_vessel =</span> self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb10-153"><a href="#cb10-153"></a>  <span class="co"># filtering just distinct number of individual vessels</span></span>
<span id="cb10-154"><a href="#cb10-154"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-155"><a href="#cb10-155"></a>  <span class="fu">group_by</span>(self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb10-156"><a href="#cb10-156"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb10-157"><a href="#cb10-157"></a>  <span class="fu">mutate</span>(<span class="at">self_reported_fishing_vessel =</span> <span class="fu">ifelse</span>(self_reported_fishing_vessel, <span class="st">"Legal"</span>, <span class="st">"Illegal"</span>),</span>
<span id="cb10-158"><a href="#cb10-158"></a>         <span class="at">percentage =</span> <span class="fu">round</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)<span class="sc">*</span><span class="dv">100</span>, <span class="at">digits =</span> <span class="dv">1</span>),</span>
<span id="cb10-159"><a href="#cb10-159"></a>         <span class="at">ymax =</span> <span class="fu">cumsum</span>(percentage),</span>
<span id="cb10-160"><a href="#cb10-160"></a>         <span class="at">ymin =</span> <span class="fu">lag</span>(ymax, <span class="at">default =</span> <span class="dv">0</span>),</span>
<span id="cb10-161"><a href="#cb10-161"></a>         <span class="at">labelPosition =</span> (ymax <span class="sc">+</span> ymin)<span class="sc">/</span><span class="dv">2</span>,</span>
<span id="cb10-162"><a href="#cb10-162"></a>         <span class="at">label =</span> <span class="fu">paste0</span>(percentage, <span class="st">"%"</span>))</span>
<span id="cb10-163"><a href="#cb10-163"></a></span>
<span id="cb10-164"><a href="#cb10-164"></a><span class="co"># finding the total count of all chinese fishing vessels</span></span>
<span id="cb10-165"><a href="#cb10-165"></a>total_count <span class="ot">&lt;-</span> <span class="fu">format</span>(<span class="fu">sum</span>(donut_df<span class="sc">$</span>count),</span>
<span id="cb10-166"><a href="#cb10-166"></a>                      <span class="at">big.mark =</span> <span class="st">","</span>)</span>
<span id="cb10-167"><a href="#cb10-167"></a></span>
<span id="cb10-168"><a href="#cb10-168"></a><span class="co"># ----------- Tree map data -----------------</span></span>
<span id="cb10-169"><a href="#cb10-169"></a></span>
<span id="cb10-170"><a href="#cb10-170"></a><span class="co"># wrangling top 10 countries by vessel count to compare</span></span>
<span id="cb10-171"><a href="#cb10-171"></a>top_10 <span class="ot">&lt;-</span> boats_clean <span class="sc">%&gt;%</span></span>
<span id="cb10-172"><a href="#cb10-172"></a>  <span class="fu">distinct</span>(mmsi, flag_gfw, self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb10-173"><a href="#cb10-173"></a>  <span class="fu">group_by</span>(flag_gfw) <span class="sc">%&gt;%</span></span>
<span id="cb10-174"><a href="#cb10-174"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb10-175"><a href="#cb10-175"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> count, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb10-176"><a href="#cb10-176"></a></span>
<span id="cb10-177"><a href="#cb10-177"></a><span class="co"># wrangling a data set for the treemap figure</span></span>
<span id="cb10-178"><a href="#cb10-178"></a>tree_df <span class="ot">&lt;-</span> boats_clean <span class="sc">%&gt;%</span></span>
<span id="cb10-179"><a href="#cb10-179"></a>  <span class="co"># filter to just top 10 countries</span></span>
<span id="cb10-180"><a href="#cb10-180"></a>  <span class="fu">filter</span>(flag_gfw <span class="sc">%in%</span> top_10<span class="sc">$</span>flag_gfw,</span>
<span id="cb10-181"><a href="#cb10-181"></a>         <span class="sc">!</span><span class="fu">is.na</span>(self_reported_fishing_vessel)) <span class="sc">%&gt;%</span></span>
<span id="cb10-182"><a href="#cb10-182"></a>  <span class="co"># only pull out distinct vessels</span></span>
<span id="cb10-183"><a href="#cb10-183"></a>  <span class="fu">distinct</span>(mmsi, flag_gfw, self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb10-184"><a href="#cb10-184"></a>  <span class="fu">group_by</span>(flag_gfw, self_reported_fishing_vessel) <span class="sc">%&gt;%</span></span>
<span id="cb10-185"><a href="#cb10-185"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb10-186"><a href="#cb10-186"></a>  <span class="co"># rename to full country</span></span>
<span id="cb10-187"><a href="#cb10-187"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">case_when</span>(</span>
<span id="cb10-188"><a href="#cb10-188"></a>    flag_gfw <span class="sc">==</span> <span class="st">"CHN"</span> <span class="sc">~</span> <span class="st">"China"</span>,</span>
<span id="cb10-189"><a href="#cb10-189"></a>    flag_gfw <span class="sc">==</span> <span class="st">"ESP"</span> <span class="sc">~</span> <span class="st">"Spain"</span>,</span>
<span id="cb10-190"><a href="#cb10-190"></a>    flag_gfw <span class="sc">==</span> <span class="st">"GBR"</span> <span class="sc">~</span> <span class="st">"UK"</span>,</span>
<span id="cb10-191"><a href="#cb10-191"></a>    flag_gfw <span class="sc">==</span> <span class="st">"ISL"</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"Ice-"</span>,<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"land"</span>),</span>
<span id="cb10-192"><a href="#cb10-192"></a>    flag_gfw <span class="sc">==</span> <span class="st">"ITA"</span> <span class="sc">~</span> <span class="st">"Italy"</span>,</span>
<span id="cb10-193"><a href="#cb10-193"></a>    flag_gfw <span class="sc">==</span> <span class="st">"JPN"</span> <span class="sc">~</span> <span class="st">"Japan"</span>,</span>
<span id="cb10-194"><a href="#cb10-194"></a>    flag_gfw <span class="sc">==</span> <span class="st">"KOR"</span> <span class="sc">~</span> <span class="st">"Korea"</span>,</span>
<span id="cb10-195"><a href="#cb10-195"></a>    flag_gfw <span class="sc">==</span> <span class="st">"NOR"</span> <span class="sc">~</span> <span class="st">"Norway"</span>,</span>
<span id="cb10-196"><a href="#cb10-196"></a>    flag_gfw <span class="sc">==</span> <span class="st">"TWN"</span> <span class="sc">~</span> <span class="st">"Taiwan"</span>,</span>
<span id="cb10-197"><a href="#cb10-197"></a>    flag_gfw <span class="sc">==</span> <span class="st">"USA"</span> <span class="sc">~</span> <span class="st">"USA"</span>))</span>
<span id="cb10-198"><a href="#cb10-198"></a></span>
<span id="cb10-199"><a href="#cb10-199"></a><span class="in">```</span></span>
<span id="cb10-200"><a href="#cb10-200"></a></span>
<span id="cb10-201"><a href="#cb10-201"></a><span class="fu">## Tree Map</span></span>
<span id="cb10-202"><a href="#cb10-202"></a></span>
<span id="cb10-203"><a href="#cb10-203"></a>*Note: As in all plots, red represents legal and yellow represents illegal. I also did not include titles, subtitles, captions, or guides in any of the three stand along plots that I created as they are all going to be small pieces of a larger infographic in which these details will be communicated. However, it is critical to include these components to your visualization if they are stand alone and do not have the additional aid from the inforgraphic.*</span>
<span id="cb10-204"><a href="#cb10-204"></a></span>
<span id="cb10-205"><a href="#cb10-205"></a>The first figure I want to create is a tree map that compares the total sizes of the top 10 countries' illegal and legal fishing vessels using AIS between 2012 and 2020. This will answer my main question:</span>
<span id="cb10-206"><a href="#cb10-206"></a></span>
<span id="cb10-207"><a href="#cb10-207"></a>**How large are China’s illegal and legal fishing fleets using automatic identification system (AIS) compared to the next 9 largest countries?**</span>
<span id="cb10-208"><a href="#cb10-208"></a></span>
<span id="cb10-211"><a href="#cb10-211"></a><span class="in">```{r}</span></span>
<span id="cb10-212"><a href="#cb10-212"></a><span class="co"># making a tree map</span></span>
<span id="cb10-213"><a href="#cb10-213"></a>tree_fig <span class="ot">&lt;-</span>  <span class="fu">ggplot</span>(tree_df, <span class="fu">aes</span>(<span class="at">area =</span> count, <span class="at">fill =</span> self_reported_fishing_vessel,</span>
<span id="cb10-214"><a href="#cb10-214"></a>                                 <span class="at">label =</span> self_reported_fishing_vessel, </span>
<span id="cb10-215"><a href="#cb10-215"></a>                                 <span class="at">subgroup =</span> country)) <span class="sc">+</span></span>
<span id="cb10-216"><a href="#cb10-216"></a>  <span class="co"># labs(title = "Comparing the World's 10 Largest Fishing Fleets") +</span></span>
<span id="cb10-217"><a href="#cb10-217"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#f4c430"</span>, <span class="st">"#b22222"</span>)) <span class="sc">+</span></span>
<span id="cb10-218"><a href="#cb10-218"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb10-219"><a href="#cb10-219"></a>  <span class="fu">geom_treemap_subgroup_border</span>(<span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb10-220"><a href="#cb10-220"></a>  <span class="fu">geom_treemap_subgroup_text</span>(<span class="at">place =</span> <span class="st">"centre"</span>, <span class="at">grow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb10-221"><a href="#cb10-221"></a>                             <span class="at">alpha =</span> <span class="fl">0.7</span>, </span>
<span id="cb10-222"><a href="#cb10-222"></a>                             <span class="at">lineheight =</span> <span class="fl">0.3</span>,</span>
<span id="cb10-223"><a href="#cb10-223"></a>                             <span class="at">colour =</span> <span class="st">"white"</span>,</span>
<span id="cb10-224"><a href="#cb10-224"></a>                             <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb10-225"><a href="#cb10-225"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-226"><a href="#cb10-226"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb10-227"><a href="#cb10-227"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"transparent"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb10-228"><a href="#cb10-228"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb10-229"><a href="#cb10-229"></a></span>
<span id="cb10-230"><a href="#cb10-230"></a><span class="in">```</span></span>
<span id="cb10-231"><a href="#cb10-231"></a></span>
<span id="cb10-232"><a href="#cb10-232"></a><span class="in">```{r echo= FALSE, out.width = "50%", fig.align = "center", fig.alt = "Tree plot comparing the world's 10 largest legal and illegal fishing fleets using AIS between 2012-2020 by country where China's fleet dwarfs the next 9 countries combined."}</span></span>
<span id="cb10-233"><a href="#cb10-233"></a><span class="in">ggsave("images/tree.jpeg", plot = tree_fig, device = "jpeg", width = 8, height = 6, units = "in")</span></span>
<span id="cb10-234"><a href="#cb10-234"></a></span>
<span id="cb10-235"><a href="#cb10-235"></a><span class="in">knitr::include_graphics("images/tree.jpeg")</span></span>
<span id="cb10-236"><a href="#cb10-236"></a></span>
<span id="cb10-237"><a href="#cb10-237"></a><span class="in">```</span></span>
<span id="cb10-238"><a href="#cb10-238"></a></span>
<span id="cb10-239"><a href="#cb10-239"></a><span class="fu">## Donut Chart</span></span>
<span id="cb10-240"><a href="#cb10-240"></a></span>
<span id="cb10-241"><a href="#cb10-241"></a>My next plot will be a donut chart that answers our second question:</span>
<span id="cb10-242"><a href="#cb10-242"></a></span>
<span id="cb10-243"><a href="#cb10-243"></a>**What percentage of China's fleet using AIS legally reported its fishing status between 2012-2020?**</span>
<span id="cb10-244"><a href="#cb10-244"></a></span>
<span id="cb10-247"><a href="#cb10-247"></a><span class="in">```{r}</span></span>
<span id="cb10-248"><a href="#cb10-248"></a><span class="co"># Making a donut chart</span></span>
<span id="cb10-249"><a href="#cb10-249"></a>donut <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> donut_df, <span class="fu">aes</span>(<span class="at">ymax=</span>ymax, <span class="at">ymin=</span>ymin, <span class="at">xmax=</span><span class="dv">4</span>, </span>
<span id="cb10-250"><a href="#cb10-250"></a>                                     <span class="at">xmin=</span><span class="dv">3</span>, <span class="at">fill =</span> self_reported_fishing_vessel)) <span class="sc">+</span></span>
<span id="cb10-251"><a href="#cb10-251"></a>  <span class="fu">geom_rect</span>() <span class="sc">+</span></span>
<span id="cb10-252"><a href="#cb10-252"></a>  <span class="co"># labeling percentages</span></span>
<span id="cb10-253"><a href="#cb10-253"></a>  <span class="fu">geom_label</span>( <span class="at">x=</span><span class="fl">3.5</span>, <span class="fu">aes</span>(<span class="at">y=</span>labelPosition, <span class="at">label=</span>label), <span class="at">size=</span><span class="dv">20</span>,</span>
<span id="cb10-254"><a href="#cb10-254"></a>              <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb10-255"><a href="#cb10-255"></a>              <span class="at">label.size =</span> <span class="cn">NA</span>,</span>
<span id="cb10-256"><a href="#cb10-256"></a>              <span class="at">family =</span> <span class="st">"sen"</span>,</span>
<span id="cb10-257"><a href="#cb10-257"></a>              <span class="at">fill =</span> <span class="cn">NA</span>,</span>
<span id="cb10-258"><a href="#cb10-258"></a>              <span class="at">lineheight =</span> <span class="fu">unit</span>(.<span class="dv">3</span>, <span class="st">"lines"</span>)) <span class="sc">+</span></span>
<span id="cb10-259"><a href="#cb10-259"></a>  <span class="co"># adding annotation for total number of vessels</span></span>
<span id="cb10-260"><a href="#cb10-260"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">'text'</span>, <span class="at">x =</span> <span class="fl">1.7</span>, <span class="at">y =</span> <span class="dv">1</span>, <span class="at">label =</span> <span class="fu">paste</span>(total_count, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"Vessels"</span>),</span>
<span id="cb10-261"><a href="#cb10-261"></a>           <span class="at">size =</span> <span class="dv">30</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">lineheight =</span> <span class="fu">unit</span>(.<span class="dv">3</span>, <span class="st">"lines"</span>), <span class="at">family =</span> <span class="st">"sen"</span>) <span class="sc">+</span></span>
<span id="cb10-262"><a href="#cb10-262"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#f4c430"</span>, <span class="st">"#b22222"</span>)) <span class="sc">+</span></span>
<span id="cb10-263"><a href="#cb10-263"></a>  <span class="fu">coord_polar</span>(<span class="at">theta=</span><span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb10-264"><a href="#cb10-264"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="fl">1.7</span>, <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb10-265"><a href="#cb10-265"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb10-266"><a href="#cb10-266"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb10-267"><a href="#cb10-267"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb10-268"><a href="#cb10-268"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="cn">NA</span>))</span>
<span id="cb10-269"><a href="#cb10-269"></a></span>
<span id="cb10-270"><a href="#cb10-270"></a><span class="co"># making a donut plot with colored background for displaying individually</span></span>
<span id="cb10-271"><a href="#cb10-271"></a>donut_filled <span class="ot">&lt;-</span> donut <span class="sc">+</span></span>
<span id="cb10-272"><a href="#cb10-272"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb10-273"><a href="#cb10-273"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">color =</span> <span class="cn">NA</span>))</span>
<span id="cb10-274"><a href="#cb10-274"></a></span>
<span id="cb10-275"><a href="#cb10-275"></a><span class="in">```</span></span>
<span id="cb10-276"><a href="#cb10-276"></a></span>
<span id="cb10-277"><a href="#cb10-277"></a><span class="in">```{r echo= FALSE, out.width = "50%", fig.align = "center", fig.align = "Donut chart showing percentages of legal and illegal Chinese fishing vessels where legal vessesl make up the 72.6% of the fleet and illegal vessels make up 27.4%. Data only included vessles recorded to have used AIS between 2012-2020."}</span></span>
<span id="cb10-278"><a href="#cb10-278"></a><span class="in"># saving plot </span></span>
<span id="cb10-279"><a href="#cb10-279"></a><span class="in">ggsave("images/donut_filled.jpeg", plot = donut_filled, device = "jpeg", width = 5, height = 5, units = "in")</span></span>
<span id="cb10-280"><a href="#cb10-280"></a></span>
<span id="cb10-281"><a href="#cb10-281"></a><span class="in">knitr::include_graphics("images/donut_filled.jpeg")</span></span>
<span id="cb10-282"><a href="#cb10-282"></a><span class="in">```</span></span>
<span id="cb10-283"><a href="#cb10-283"></a></span>
<span id="cb10-284"><a href="#cb10-284"></a><span class="fu">## Barchart</span></span>
<span id="cb10-285"><a href="#cb10-285"></a></span>
<span id="cb10-286"><a href="#cb10-286"></a>My last plot will be a barchart answering the final question:</span>
<span id="cb10-287"><a href="#cb10-287"></a></span>
<span id="cb10-288"><a href="#cb10-288"></a>**What were the total number of illegal and legal fishing vessels by class using AIS between 2012-2020?**</span>
<span id="cb10-289"><a href="#cb10-289"></a></span>
<span id="cb10-290"><a href="#cb10-290"></a>I added value lables on here because I removed the x axis for simplicity in design. It important to make sure that as you modify or remove elements that you are making sure that information is not entirely lost as it will confuse the reader.</span>
<span id="cb10-291"><a href="#cb10-291"></a></span>
<span id="cb10-294"><a href="#cb10-294"></a><span class="in">```{r}</span></span>
<span id="cb10-295"><a href="#cb10-295"></a><span class="co"># making a barchart</span></span>
<span id="cb10-296"><a href="#cb10-296"></a>barchart <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> barchart_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(vessel_class_gfw, count), </span>
<span id="cb10-297"><a href="#cb10-297"></a>                                           <span class="at">y =</span> count, <span class="at">fill =</span> self_reported_fishing_vessel)) <span class="sc">+</span></span>
<span id="cb10-298"><a href="#cb10-298"></a>  <span class="co"># adding count text to each bar</span></span>
<span id="cb10-299"><a href="#cb10-299"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">comma</span>(count), <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.1</span>), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">20</span>,</span>
<span id="cb10-300"><a href="#cb10-300"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> .<span class="dv">9</span>),</span>
<span id="cb10-301"><a href="#cb10-301"></a>            <span class="at">family =</span> <span class="st">"sen"</span>) <span class="sc">+</span></span>
<span id="cb10-302"><a href="#cb10-302"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb10-303"><a href="#cb10-303"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb10-304"><a href="#cb10-304"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Self Registered"</span>, </span>
<span id="cb10-305"><a href="#cb10-305"></a>       <span class="at">x =</span> <span class="st">""</span>, </span>
<span id="cb10-306"><a href="#cb10-306"></a>       <span class="at">y =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb10-307"><a href="#cb10-307"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#f4c430"</span>, <span class="st">"#b22222"</span>)) <span class="sc">+</span></span>
<span id="cb10-308"><a href="#cb10-308"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">30000</span>)) <span class="sc">+</span></span>
<span id="cb10-309"><a href="#cb10-309"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"trawlers"</span> <span class="ot">=</span> <span class="st">"Trawlers"</span>, </span>
<span id="cb10-310"><a href="#cb10-310"></a>                              <span class="st">"fishing"</span> <span class="ot">=</span> <span class="st">"Unknown"</span>, </span>
<span id="cb10-311"><a href="#cb10-311"></a>                              <span class="st">"set_longlines"</span> <span class="ot">=</span> <span class="st">"Longlines"</span>,</span>
<span id="cb10-312"><a href="#cb10-312"></a>                              <span class="st">"set_gillnets"</span> <span class="ot">=</span> <span class="st">"Gillnets"</span>, </span>
<span id="cb10-313"><a href="#cb10-313"></a>                              <span class="st">"other"</span> <span class="ot">=</span> <span class="st">"Mixed Other"</span>, </span>
<span id="cb10-314"><a href="#cb10-314"></a>                              <span class="st">"fixed_gear"</span> <span class="ot">=</span> <span class="st">"Fixed Gear"</span>)) <span class="sc">+</span></span>
<span id="cb10-315"><a href="#cb10-315"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb10-316"><a href="#cb10-316"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-317"><a href="#cb10-317"></a>    <span class="co"># note: need to make these fills as transparent for final figure when stitching together</span></span>
<span id="cb10-318"><a href="#cb10-318"></a>    <span class="co"># they are colored right now so we can show the bacgkround color in the individual plot</span></span>
<span id="cb10-319"><a href="#cb10-319"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb10-320"><a href="#cb10-320"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb10-321"><a href="#cb10-321"></a>    <span class="co"># axis </span></span>
<span id="cb10-322"><a href="#cb10-322"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-323"><a href="#cb10-323"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-324"><a href="#cb10-324"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">family =</span> <span class="st">"sen"</span>,<span class="at">size =</span> <span class="dv">48</span>, </span>
<span id="cb10-325"><a href="#cb10-325"></a>                               <span class="at">margin =</span> <span class="fu">margin</span>(<span class="sc">-</span><span class="dv">30</span>, <span class="sc">-</span><span class="dv">20</span>, <span class="sc">-</span><span class="dv">50</span>, <span class="dv">0</span>)),</span>
<span id="cb10-326"><a href="#cb10-326"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-327"><a href="#cb10-327"></a>    <span class="co"># legend</span></span>
<span id="cb10-328"><a href="#cb10-328"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb10-329"><a href="#cb10-329"></a>  )</span>
<span id="cb10-330"><a href="#cb10-330"></a></span>
<span id="cb10-331"><a href="#cb10-331"></a></span>
<span id="cb10-332"><a href="#cb10-332"></a><span class="co"># making a barchart with colored background for displaying individually</span></span>
<span id="cb10-333"><a href="#cb10-333"></a>barchart_filled <span class="ot">&lt;-</span> barchart <span class="sc">+</span></span>
<span id="cb10-334"><a href="#cb10-334"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb10-335"><a href="#cb10-335"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">color =</span> <span class="cn">NA</span>))</span>
<span id="cb10-336"><a href="#cb10-336"></a></span>
<span id="cb10-337"><a href="#cb10-337"></a><span class="in">```</span></span>
<span id="cb10-338"><a href="#cb10-338"></a></span>
<span id="cb10-339"><a href="#cb10-339"></a><span class="in">```{r echo= FALSE, out.width = "70%", fig.align = "center", fig.alt = "Barchart showing the abudnances of Chinese fishing vessels by class. Trawlers, long lines and gillnets are the most abundant known classes regardless of legality. Data only included vessles recorded to have used AIS between 2012-2020."}</span></span>
<span id="cb10-340"><a href="#cb10-340"></a><span class="in"># saving plot </span></span>
<span id="cb10-341"><a href="#cb10-341"></a><span class="in">ggsave("images/barchart_filled.jpeg", plot = barchart_filled, device = "jpeg", width = 12, height = 6, units = "in")</span></span>
<span id="cb10-342"><a href="#cb10-342"></a></span>
<span id="cb10-343"><a href="#cb10-343"></a><span class="in">knitr::include_graphics("images/barchart_filled.jpeg")</span></span>
<span id="cb10-344"><a href="#cb10-344"></a><span class="in">```</span></span>
<span id="cb10-345"><a href="#cb10-345"></a></span>
<span id="cb10-346"><a href="#cb10-346"></a><span class="fu">## Text Annotation</span></span>
<span id="cb10-347"><a href="#cb10-347"></a></span>
<span id="cb10-348"><a href="#cb10-348"></a>Now we are going to create some text annotation to this plot to explain exactly what AIS is and provide some context to guide the reader through our visuals. This step is very important as my plots do not have any titles or subtitles, so explaining missing links that explain the data and figures will be crucial for the reader to follow along:</span>
<span id="cb10-349"><a href="#cb10-349"></a></span>
<span id="cb10-352"><a href="#cb10-352"></a><span class="in">```{r}</span></span>
<span id="cb10-353"><a href="#cb10-353"></a><span class="co"># making annotation texts for the infographic </span></span>
<span id="cb10-354"><a href="#cb10-354"></a>quote <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"China boasts the world's largest fishing fleet, with over 73K vessels that utilized the Automatic Identification System (AIS) between 2012 and 2020. AIS reveals a vessel's location and fishing activities. AIS usage is mandatory for many larger vessels, but not all comply in broadcasting their fishing status. Approximately 27.4% of these vessels failed to broadcast their fishing status, indicating potential illegal fishing activities according to data from Global Fishing Watch. These vessels predominantly included: "</span>)</span>
<span id="cb10-355"><a href="#cb10-355"></a></span>
<span id="cb10-356"><a href="#cb10-356"></a>boat_quote <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Trawlers: pull large nets across the sea floor "</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb10-357"><a href="#cb10-357"></a>                      <span class="st">"Longlines: pull long fishing lines through the water with multiple baited"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"                  hooks attatched to each single line"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb10-358"><a href="#cb10-358"></a>                      <span class="st">"Gillnets: pull large nets through the middle water column"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, </span>
<span id="cb10-359"><a href="#cb10-359"></a>                      <span class="st">"Fixed Gear: place fixed objects such as nets and traps tethered to buoys"</span>)</span>
<span id="cb10-360"><a href="#cb10-360"></a></span>
<span id="cb10-361"><a href="#cb10-361"></a><span class="co"># making quotes a ggplot object</span></span>
<span id="cb10-362"><a href="#cb10-362"></a>quote_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-363"><a href="#cb10-363"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="dv">0</span>, <span class="at">xmax =</span> <span class="dv">1</span>, <span class="at">ymin =</span> <span class="fl">0.1</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span>  <span class="co"># Add blue background</span></span>
<span id="cb10-364"><a href="#cb10-364"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.03</span>, <span class="at">y =</span> .<span class="dv">73</span>, <span class="at">label =</span> <span class="fu">str_wrap</span>(quote, <span class="at">width =</span> <span class="dv">80</span>),</span>
<span id="cb10-365"><a href="#cb10-365"></a>           <span class="at">family =</span> <span class="st">"sen"</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">16</span>, </span>
<span id="cb10-366"><a href="#cb10-366"></a>           <span class="at">lineheight =</span> <span class="fl">0.32</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb10-367"><a href="#cb10-367"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">0.03</span>, <span class="at">y =</span> .<span class="dv">28</span>, <span class="at">label =</span> boat_quote,</span>
<span id="cb10-368"><a href="#cb10-368"></a>           <span class="at">family =</span> <span class="st">"sen"</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">18</span>,</span>
<span id="cb10-369"><a href="#cb10-369"></a>           <span class="at">lineheight =</span> <span class="fl">0.32</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="fl">0.4</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb10-370"><a href="#cb10-370"></a>  </span>
<span id="cb10-371"><a href="#cb10-371"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb10-372"><a href="#cb10-372"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb10-373"><a href="#cb10-373"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb10-374"><a href="#cb10-374"></a></span>
<span id="cb10-375"><a href="#cb10-375"></a>  </span>
<span id="cb10-376"><a href="#cb10-376"></a><span class="in">```</span></span>
<span id="cb10-377"><a href="#cb10-377"></a></span>
<span id="cb10-378"><a href="#cb10-378"></a><span class="fu">## Base Infographic</span></span>
<span id="cb10-379"><a href="#cb10-379"></a></span>
<span id="cb10-380"><a href="#cb10-380"></a>We are now getting towards the end. I want to make a base template in <span class="in">`ggplot2`</span> that will serve as the foundation of my infographic with the title, subtitle, and caption. I do so by creating an empty <span class="in">`ggplot()`</span> object and adding labels to it along with with my github information in the caption. I also set the color background here and adjust the margins:</span>
<span id="cb10-381"><a href="#cb10-381"></a></span>
<span id="cb10-384"><a href="#cb10-384"></a><span class="in">```{r}</span></span>
<span id="cb10-385"><a href="#cb10-385"></a><span class="co"># Base template ggplot for infographic </span></span>
<span id="cb10-386"><a href="#cb10-386"></a>g_base <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-387"><a href="#cb10-387"></a>  <span class="co"># geom_segment(aes(x = .5, y = .5, xend = .5, yend = 0.6), color = "black") +</span></span>
<span id="cb10-388"><a href="#cb10-388"></a>  <span class="fu">labs</span>( </span>
<span id="cb10-389"><a href="#cb10-389"></a>    <span class="at">title =</span> <span class="st">"The World's Largest Fishing Fleet"</span>,</span>
<span id="cb10-390"><a href="#cb10-390"></a>    <span class="at">subtitle =</span> <span class="st">"China's &lt;span</span></span>
<span id="cb10-391"><a href="#cb10-391"></a><span class="st">style='color:#f4c430;font-size:78pt;'&gt;**Illegal**&lt;/span&gt; and &lt;span style='color:#b22222;font-size:78pt;'&gt;**Legal**&lt;/span&gt; Fishing Vessels Using AIS (2012-2020)"</span>,</span>
<span id="cb10-392"><a href="#cb10-392"></a> <span class="at">caption =</span> gh_caption) <span class="sc">+</span></span>
<span id="cb10-393"><a href="#cb10-393"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb10-394"><a href="#cb10-394"></a>  <span class="fu">theme</span>(</span>
<span id="cb10-395"><a href="#cb10-395"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb10-396"><a href="#cb10-396"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"play"</span>, <span class="at">size =</span> <span class="dv">60</span>, </span>
<span id="cb10-397"><a href="#cb10-397"></a>                        <span class="at">lineheight =</span> <span class="fl">0.3</span>, <span class="at">colour =</span> <span class="st">"white"</span>),</span>
<span id="cb10-398"><a href="#cb10-398"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">colour =</span> pal[<span class="st">"bg"</span>]),</span>
<span id="cb10-399"><a href="#cb10-399"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">128</span>,<span class="at">face =</span> <span class="st">"bold"</span>, </span>
<span id="cb10-400"><a href="#cb10-400"></a>                              <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>)),</span>
<span id="cb10-401"><a href="#cb10-401"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">family =</span> <span class="st">"sen"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, </span>
<span id="cb10-402"><a href="#cb10-402"></a>                                     <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>)),</span>
<span id="cb10-403"><a href="#cb10-403"></a>    <span class="at">plot.caption =</span> <span class="fu">element_markdown</span>(<span class="at">family =</span> <span class="st">"sen"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, </span>
<span id="cb10-404"><a href="#cb10-404"></a>                                     <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>)),</span>
<span id="cb10-405"><a href="#cb10-405"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>, <span class="at">t =</span> <span class="dv">50</span>, <span class="at">r =</span> <span class="dv">50</span>, <span class="at">l =</span> <span class="dv">50</span>),</span>
<span id="cb10-406"><a href="#cb10-406"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>() </span>
<span id="cb10-407"><a href="#cb10-407"></a>  ) </span>
<span id="cb10-408"><a href="#cb10-408"></a><span class="in">```</span></span>
<span id="cb10-409"><a href="#cb10-409"></a></span>
<span id="cb10-410"><a href="#cb10-410"></a><span class="fu">## Adding Creativity</span></span>
<span id="cb10-411"><a href="#cb10-411"></a></span>
<span id="cb10-412"><a href="#cb10-412"></a>Lastly, we want to spice up our figure and add some fishy themed elements to make it pop out and not just look like a bunch of statistics. I just grabbed and edited some basic marine-themed PNG's from google which can go a long way. It is important to make sure that these visuals are not overpowering your infrographic or too distracting from the figures:</span>
<span id="cb10-413"><a href="#cb10-413"></a></span>
<span id="cb10-416"><a href="#cb10-416"></a><span class="in">```{r}</span></span>
<span id="cb10-417"><a href="#cb10-417"></a><span class="co"># read in PNG images for spicing up the grpahics</span></span>
<span id="cb10-418"><a href="#cb10-418"></a></span>
<span id="cb10-419"><a href="#cb10-419"></a><span class="co"># hooks</span></span>
<span id="cb10-420"><a href="#cb10-420"></a>hookstem_donut <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/hookstem_donut.png"</span>))</span>
<span id="cb10-421"><a href="#cb10-421"></a>hook_donut <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/hook_donut.png"</span>))</span>
<span id="cb10-422"><a href="#cb10-422"></a>hookstem_bar <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/hookstem_bar.png"</span>))</span>
<span id="cb10-423"><a href="#cb10-423"></a>hook_bar <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/hook_bar.png"</span>))</span>
<span id="cb10-424"><a href="#cb10-424"></a><span class="co"># fish banner</span></span>
<span id="cb10-425"><a href="#cb10-425"></a>fish_school <span class="ot">&lt;-</span> <span class="fu">readPNG</span>(<span class="fu">here</span>(rootdir, <span class="st">"images/fish_school.png"</span>))</span>
<span id="cb10-426"><a href="#cb10-426"></a></span>
<span id="cb10-427"><a href="#cb10-427"></a></span>
<span id="cb10-428"><a href="#cb10-428"></a><span class="co"># donut plot hooks</span></span>
<span id="cb10-429"><a href="#cb10-429"></a>hookstem_donut_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-430"><a href="#cb10-430"></a>  <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(hookstem_donut), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb10-431"><a href="#cb10-431"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb10-432"><a href="#cb10-432"></a></span>
<span id="cb10-433"><a href="#cb10-433"></a>hook_donut_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-434"><a href="#cb10-434"></a>  <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(hook_donut), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb10-435"><a href="#cb10-435"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb10-436"><a href="#cb10-436"></a></span>
<span id="cb10-437"><a href="#cb10-437"></a><span class="co"># barchart hooks</span></span>
<span id="cb10-438"><a href="#cb10-438"></a>hookstem_bar_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-439"><a href="#cb10-439"></a>  <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(hookstem_bar), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb10-440"><a href="#cb10-440"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb10-441"><a href="#cb10-441"></a></span>
<span id="cb10-442"><a href="#cb10-442"></a>hook_bar_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-443"><a href="#cb10-443"></a>  <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(hook_bar), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb10-444"><a href="#cb10-444"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb10-445"><a href="#cb10-445"></a></span>
<span id="cb10-446"><a href="#cb10-446"></a><span class="co"># fishing hook line</span></span>
<span id="cb10-447"><a href="#cb10-447"></a>line1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> .<span class="dv">5</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> .<span class="dv">5</span>, <span class="at">yend =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"grey2"</span>, <span class="at">linewidth=</span><span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb10-448"><a href="#cb10-448"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb10-449"><a href="#cb10-449"></a></span>
<span id="cb10-450"><a href="#cb10-450"></a><span class="co"># fish banner</span></span>
<span id="cb10-451"><a href="#cb10-451"></a>fish_school_gg <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span>   <span class="fu">annotation_custom</span>(<span class="fu">rasterGrob</span>(fish_school), <span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>) <span class="sc">+</span></span>
<span id="cb10-452"><a href="#cb10-452"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb10-453"><a href="#cb10-453"></a></span>
<span id="cb10-454"><a href="#cb10-454"></a><span class="in">```</span></span>
<span id="cb10-455"><a href="#cb10-455"></a></span>
<span id="cb10-456"><a href="#cb10-456"></a><span class="fu">## Stitching Together</span></span>
<span id="cb10-457"><a href="#cb10-457"></a></span>
<span id="cb10-458"><a href="#cb10-458"></a>We are now at the final step now that all the figures, text, and infographic base have been created. I am using the <span class="in">`patchwork`</span> package to add layers of inset elements/plots (using <span class="in">`inset_element()`</span> so that our figures and creative elements are nicely stacked. *Note: I had to adjust the `fill` to be `NA` for the plots in order to get them to not block one another when stacking my inset elements.*</span>
<span id="cb10-459"><a href="#cb10-459"></a></span>
<span id="cb10-460"><a href="#cb10-460"></a>We are then left with the final result:</span>
<span id="cb10-461"><a href="#cb10-461"></a></span>
<span id="cb10-464"><a href="#cb10-464"></a><span class="in">```{r}</span></span>
<span id="cb10-465"><a href="#cb10-465"></a><span class="co"># adding together all elements of infographic</span></span>
<span id="cb10-466"><a href="#cb10-466"></a>final_fig <span class="ot">&lt;-</span> g_base <span class="sc">+</span></span>
<span id="cb10-467"><a href="#cb10-467"></a>  <span class="co"># fish banner</span></span>
<span id="cb10-468"><a href="#cb10-468"></a>  <span class="fu">inset_element</span>(fish_school_gg, <span class="at">left =</span> <span class="sc">-</span><span class="fl">0.05</span>, <span class="at">right =</span> <span class="fl">1.05</span>, <span class="at">top =</span> <span class="fl">0.4</span>, <span class="at">bottom =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb10-469"><a href="#cb10-469"></a>  <span class="co"># fishing line </span></span>
<span id="cb10-470"><a href="#cb10-470"></a>  <span class="fu">inset_element</span>(line1, <span class="at">left =</span> .<span class="dv">155</span>, <span class="at">right =</span> .<span class="dv">17</span>, <span class="at">top =</span> .<span class="dv">8</span>, <span class="at">bottom =</span> <span class="fl">0.425</span>) <span class="sc">+</span></span>
<span id="cb10-471"><a href="#cb10-471"></a>  <span class="co"># fishing line</span></span>
<span id="cb10-472"><a href="#cb10-472"></a>  <span class="fu">inset_element</span>(line1, <span class="at">left =</span> .<span class="dv">73</span>, <span class="at">right =</span> .<span class="dv">74</span>, <span class="at">top =</span> .<span class="dv">8</span>, <span class="at">bottom =</span> <span class="fl">0.34</span>) <span class="sc">+</span></span>
<span id="cb10-473"><a href="#cb10-473"></a>  <span class="co"># tree map</span></span>
<span id="cb10-474"><a href="#cb10-474"></a>  <span class="fu">inset_element</span>(tree_fig, <span class="at">left =</span> <span class="dv">0</span>, <span class="at">right =</span> <span class="dv">1</span>, <span class="at">top =</span> <span class="dv">1</span>, <span class="at">bottom =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb10-475"><a href="#cb10-475"></a>  <span class="co"># hookstem donut </span></span>
<span id="cb10-476"><a href="#cb10-476"></a>  <span class="fu">inset_element</span>(hookstem_donut_gg, <span class="at">left =</span> <span class="fl">0.658</span>, <span class="at">right =</span> .<span class="dv">748</span>, <span class="at">top =</span> <span class="fl">0.405</span>, <span class="at">bottom =</span> .<span class="dv">191</span>) <span class="sc">+</span></span>
<span id="cb10-477"><a href="#cb10-477"></a>  <span class="co"># barchart </span></span>
<span id="cb10-478"><a href="#cb10-478"></a>  <span class="fu">inset_element</span>(barchart, <span class="at">left =</span> <span class="sc">-</span><span class="fl">0.075</span>, <span class="at">right =</span> <span class="dv">1</span>, <span class="at">top =</span> <span class="fl">0.35</span>, <span class="at">bottom =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb10-479"><a href="#cb10-479"></a>  <span class="co"># donut chart</span></span>
<span id="cb10-480"><a href="#cb10-480"></a>  <span class="fu">inset_element</span>(donut, <span class="at">left =</span> <span class="fl">0.45</span>, <span class="at">right =</span> <span class="dv">1</span>, <span class="at">top =</span> <span class="fl">0.3</span>, <span class="at">bottom =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb10-481"><a href="#cb10-481"></a>  <span class="co"># donut bar hooks</span></span>
<span id="cb10-482"><a href="#cb10-482"></a>  <span class="fu">inset_element</span>(hookstem_bar_gg, <span class="at">left =</span> <span class="fl">0.15</span>, <span class="at">right =</span> .<span class="dv">25</span>, <span class="at">top =</span> <span class="fl">0.447</span>, <span class="at">bottom =</span> .<span class="dv">295</span>) <span class="sc">+</span></span>
<span id="cb10-483"><a href="#cb10-483"></a>  <span class="fu">inset_element</span>(hook_bar_gg, <span class="at">left =</span> <span class="fl">0.14</span>, <span class="at">right =</span> .<span class="dv">24</span>, <span class="at">top =</span> <span class="fl">0.43</span>, <span class="at">bottom =</span> .<span class="dv">27</span>) <span class="sc">+</span></span>
<span id="cb10-484"><a href="#cb10-484"></a>  <span class="co"># bar donut hooks</span></span>
<span id="cb10-485"><a href="#cb10-485"></a>  <span class="fu">inset_element</span>(hook_donut_gg, <span class="at">left =</span> <span class="fl">0.66</span>, <span class="at">right =</span> .<span class="dv">76</span>, <span class="at">top =</span> <span class="fl">0.401</span>, <span class="at">bottom =</span> .<span class="dv">151</span>) <span class="sc">+</span></span>
<span id="cb10-486"><a href="#cb10-486"></a>  <span class="co"># quotes</span></span>
<span id="cb10-487"><a href="#cb10-487"></a>  <span class="fu">inset_element</span>(quote_gg, <span class="at">left =</span> <span class="sc">-</span>.<span class="dv">04</span>, <span class="at">right =</span> <span class="fl">1.04</span>, <span class="at">top =</span> .<span class="dv">7</span>, <span class="at">bottom =</span> .<span class="dv">35</span>) <span class="sc">+</span></span>
<span id="cb10-488"><a href="#cb10-488"></a>  <span class="co"># annotations </span></span>
<span id="cb10-489"><a href="#cb10-489"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb10-490"><a href="#cb10-490"></a>    <span class="at">theme =</span> <span class="fu">theme</span>(</span>
<span id="cb10-491"><a href="#cb10-491"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> pal[<span class="st">"bg"</span>], <span class="at">colour =</span> pal[<span class="st">"bg"</span>])))</span>
<span id="cb10-492"><a href="#cb10-492"></a><span class="in">```</span></span>
<span id="cb10-493"><a href="#cb10-493"></a></span>
<span id="cb10-494"><a href="#cb10-494"></a><span class="in">```{r, echo = FALSE, fig.cap = "Infographic showing the the relative size of China's fishing fleet compared to the nex 9 largest countries' fishing fleets, total number of fishing vessles by class, and percent of illegal and legal vessels. 27.4% of the vessels were reported to be illegal with trawlers, longlines, and gillnets making up the largest portion of vessels. Data represents legal (red) and illegal (yellow) fishing vessels using AIS between 2012-2020."}</span></span>
<span id="cb10-495"><a href="#cb10-495"></a></span>
<span id="cb10-496"><a href="#cb10-496"></a><span class="in"># saving plot </span></span>
<span id="cb10-497"><a href="#cb10-497"></a><span class="in">ggsave("images/final_fig.jpeg", plot = final_fig, device = "jpeg", width = 10, height = 14, units = "in")</span></span>
<span id="cb10-498"><a href="#cb10-498"></a></span>
<span id="cb10-499"><a href="#cb10-499"></a><span class="in">knitr::include_graphics("images/final_fig.jpeg")</span></span>
<span id="cb10-500"><a href="#cb10-500"></a><span class="in">```</span></span>
<span id="cb10-501"><a href="#cb10-501"></a></span>
<span id="cb10-502"><a href="#cb10-502"></a><span class="fu">## Design Elements:</span></span>
<span id="cb10-503"><a href="#cb10-503"></a></span>
<span id="cb10-504"><a href="#cb10-504"></a>And that is how you make an infographic in <span class="in">`ggplot2`</span>! There are many ways in which you can take this, but this is one effective and simple way that worked for me. It is important that you consider design elements as you start planning your infographic. Some of the primary design elements that I considered when creating this infographic were:</span>
<span id="cb10-505"><a href="#cb10-505"></a></span>
<span id="cb10-506"><a href="#cb10-506"></a>**1) Graphic Forms:** I ended up using a tree map, donut chart, and barchart to answer the three questions listed. While these plots are not necessarily considered *fancy*, they really allowed me to focus on visualizing the data I wanted to portray effectively, simply, and artistically. I wanted to focus on big picture trends/information which these plots allowed me to do. Sometimes keeping it more simple and focusing on aesthetics allowes for a better portrayal of your take home messages.</span>
<span id="cb10-507"><a href="#cb10-507"></a></span>
<span id="cb10-508"><a href="#cb10-508"></a>**2) Text:** I kept my title and subtitle at one line each to ensure the text was not overwhelming for the reader and remained concise. I kept the central annotation in the middle of the infographic all in one place instead of cutting it up into smaller pieces around the graphic so the reader would not have to move their eyes as much to get the bulk of the information. Cutting down on axes text using <span class="in">`theme_void()`</span> for each plot and removing bars/labels when possible really simplified the infographic and llowed for easier interpretion of the figures.</span>
<span id="cb10-509"><a href="#cb10-509"></a></span>
<span id="cb10-510"><a href="#cb10-510"></a>**3) Themes:** I set a blue/grey background to show a deep sea feel and to also allow the gold and yellow to pop out a bit more. I wanted to create a maritime feel to the infographic, so I added some fishhooks to hold onto the plots and also some fish swimming around at the bottom. I also utilized a light blue text box in the text annotation to highlight information within the ocean theme.</span>
<span id="cb10-511"><a href="#cb10-511"></a></span>
<span id="cb10-512"><a href="#cb10-512"></a>**4) Colors:**I used red and gold throughout the inforgaphic as they are the colors of the Chinese flag. Red represents “legal” and yellow is “illegal” (as annotated in the subtitle acting as a key). While these two colors are not my favorite, it added a layer of uniqueness to the theme that made the colors a bit more meaningful.</span>
<span id="cb10-513"><a href="#cb10-513"></a></span>
<span id="cb10-514"><a href="#cb10-514"></a>**5) Typography:** I used two different fonts here: *Playfair Display* for the title and *Sen* for the text. These two fonts run well together, are clear, and fit the theme of the infographic I was creating. *Playfair Display* was used for the title and *Sen* was used for mos other text text. It is simple but does not look boring.</span>
<span id="cb10-515"><a href="#cb10-515"></a></span>
<span id="cb10-516"><a href="#cb10-516"></a>**6) General Design:** The general design here was to start with the big picture tree map comparing the relative size of China’s fleet to the next 9 countries' fleets. It then went into the text annotation which explains the purpose/background of the infographic. After this is set, the reader then goes into the nitty gritty where they explore the percentage and abundances of vessels by class and legality. It is suppose to flow from big picture to specifics with text in the middle to guide the reader. I used modest spacing between figures, but the text is a bit tight as a lot needed to be explained regarding the AIS system which couldn’t be graphically shown.</span>
<span id="cb10-517"><a href="#cb10-517"></a></span>
<span id="cb10-518"><a href="#cb10-518"></a>**7) Data Contextualization:** I really focused on the data contextualization through the central annotation. because I removed axes and titles, it was key to have the primary contextualization in words to guide the reader. There are some things like the AIS system that could not be explained in the data, so I put it into context verbally. I also explained some uncertainty around what illegal vs legal vessels are, and lastly that these total vessels are not ALL of the vessels in the fleet but rather just the ones using AIS. Explaining this in the text annotation allowed me to bridge these gaps not seen in the figures.</span>
<span id="cb10-519"><a href="#cb10-519"></a></span>
<span id="cb10-520"><a href="#cb10-520"></a>**8) Centering Primary message:** I did so by placing the tee map first which really gets at the big question of how big is China’s illegal and legal fishing fleet? I tried to make this the big and central aspect of the infographic as I feel like the tree map carries a lot of weight even though it has a simple design. The sheer size of China's fleet comapred to the top next 9 countries realy stands out and serves as a powerful statement right off the bat.</span>
<span id="cb10-521"><a href="#cb10-521"></a></span>
<span id="cb10-522"><a href="#cb10-522"></a>**9) Accessibility:** In general, red, gold, and grey/blue are not problematic color schemes for color blindness to what I found. Furthermore, the background contrast is strong against the red and gold, so the color scheme is onto a big concern for this. Because I relied heavily on red in this, I did not use any green to ensure that red/green colorblindness (the most common form) was not an issue here.</span>
<span id="cb10-523"><a href="#cb10-523"></a></span>
<span id="cb10-524"><a href="#cb10-524"></a>**10) Diversity Equity Inclusion (DEI):** While my infographic does not directly address DEI in the data itself, I tried to be mindful in the way that I portrayed China in this to avoid creating negative emotion towards the country. It was challenging to show this data accurately without painting China as the an environmental terrorist. Phrasing the questions and context more factually and less opinionated helps to avoid negative feelings.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Copyright 2023, Raymond Hunter
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Made using Quarto
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>