{
  "hash": "0d1ce5af869edb463a1bb890341efbae",
  "result": {
    "markdown": "---\ntitle: 'A Spatial Analysis of Houston Blackouts and the Communtiies it Affected'\n# description: \"A look into modeling microcosms\"\nauthor:\n  - name: Raymond Hunter\n    url: https://ramhunte.github.io/\ndate: 12-015-2023\n# bibliography: references.bib\n#citation:\n  # url:\n# image: \ncategories: [Quarto, R] # self-defined categories\nformat: \n  html:\n    code-fold: true\n    code-copy: true\n    code-summary: \"code\"\n    code-line-numbers: true\n    code-tools: true\n    code-block-border-left: true\ntoc: true\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n---\n\n\n[Github project repository](https://github.com/ramhunte/houston_blackout)\n\n\n\n\n\n## Background\n\nNatural disasters oftentimes occur unpredictably and rapidly, and the severity of them can vary widely. Specifically in the Southern United States, major storms (like Hurricane Katrina) can have devastating and long lasting consequences on communities.[^1] \"In February 2021, the state of Texas suffered a major power crisis, which came about as a result of three severe winter storms sweeping across the United States on February 10--11, 13--17, and 15--20.\"[^2]. While these storms seem like once in a blue moon events, they are becoming much more of a normal occurrence. More importantly, storms do not impact all communities the same, and therefore it is critical that we incorporate racial justice components to our lines of environmental analysese to understand how we can mitigate marginalized groups from being disproportianately harmed from climate change.\n\n[^1]:LaJoie, A. S., Sprang, G., & McKinney, W. P. (2010). Long‐term effects of Hurricane Katrina on the psychological well‐being of evacuees. Disasters, 34(4), 1031-1044.\n\n[^2]: Wikipedia. 2021. \"2021 Texas power crisis.\" Last modified October\n    2, 2021. <https://en.wikipedia.org/wiki/2021_Texas_power_crisis>.\n\n## Goal \nThe goal of this study is to try and answer the question: **Which communities in Houston experienced blackouts from the February 2021 storms, and did they vary by socioeconomic status?** Other studies have shown that not only do lower socioeconomic status communities experience more intense consequences of natural disaster, but they also don't always receive the same degree of aid following one.[^2]\n\n[^2]: Hess, D. B. (2005). Access to employment for adults in poverty in the Buffalo-Niagara region. Urban Studies, 42(7), 1177-1200.\n\nBy identifying the total number of houses in Houston that lost power and overlaying socioeconomic data to these homes, we can begin to look at these underlying patterns of potential environmental injustice. These types of studies are becoming critically important as climate change continues to increase the frequency of severe storms including intense precipitation events throughout Texas[^3] as not all communities are affected the same. We need to look at how communities of varying socioeconomic status are impacted as a result.\n\n[^3]: Li, Z., Li, X., Wang, Y., & Quiring, S. M. (2019). Impact of climate change on precipitation patterns in Houston, Texas, USA. Anthropocene, 25, 100193.\n\n## Approach\n\nI used remotely-sensed night lights data from before and after the storms to estimate power outages. Data was acquired from the [Visible Infrared Imaging Radiometer Suite\n(VIIRS)](https://en.wikipedia.org/wiki/Visible_Infrared_Imaging_Radiometer_Suite)\nfrom the Suomi satellite. I used the VNP46A1 tolook for variation in night lights before and after the storm as a way of identifying areas that lost electric power as a result of the storms. Furthermore, data containing the physical boundaires and area of buildings and roads is needed to spatially join to areas that lost power. I gathered this data from [OpenStreetMap](https://www.openstreetmap.org/#map=4/38.01/-95.84) providing high resolution data on the structural layout of the city. Finally, we need to join this data with socioeconomic factor data pertaining to all the communities in Houston affected by the blackouts. I pulled this data from the US Census Bureau (see `Readme` file) that shows block group county level information on various socioeconomic characterisitcs.\n\nThese types of analysis require a variety of different tools to carry out from satellite images and census data to finalized maps. Some of the most important tools in carrying out this analysis include:\n* loading, transforming, and wrangling vector/raster data\n* raster operations to identify blackout areas from satellite imagery\n* vector operations to isolate affected buildings and remove interference (road lights)\n* spatial joins of regions experiencing blackouts and the total number of untis within them\n\n### Data\n\n#### Night lights\n\nUsing NASA's Worldview to find data pre and post storm, I found satellite images recorded on\n2021-02-07 and 2021-02-16 that provided two clear, contrasting images to\nvisualize the extent of the power outage in Texas.\nVIIRS data is distributed through NASA's [Level-1 and Atmospheric Archive & Distribution System Distributed Active Archive Center (LAADS DAAC)](https://ladsweb.modaps.eosdis.nasa.gov/). Many NASA Earth data\nproducts are distributed in 10x10 degree tiles in sinusoidal equal-area\nprojection that are identified by their horizontal and vertical\nposition in the grid. Houston lies on the border of tiles h08v05 and\nh08v06, and so I downloaded two tiles per date to ensure the whole city was being included.\nThese data are stored in the `VNP46A1` folder:\n\n-   `VNP46A1.A2021038.h08v05.001.2021039064328.h5.tif`: tile h08v05,\n    collected on 2021-02-07\\\n-   `VNP46A1.A2021038.h08v06.001.2021039064329.h5.tif`: tile h08v06,\n    collected on 2021-02-07\\\n-   `VNP46A1.A2021047.h08v05.001.2021048091106.h5.tif`: tile h08v05,\n    collected on 2021-02-16\\\n-   `VNP46A1.A2021047.h08v06.001.2021048091105.h5.tif`: tile h08v06,\n    collected on 2021-02-16\n\n#### Roads\n\nOne issue with night light data is that light pollution can interfere with detecting patterns of interest. Highways make up much of the night lights seen from space (see Google's [Earth at Night](https://earth.google.com/web/@27.44405464,-84.7693044,206.63660162a,8916361.52264659d,35y,0h,0t,0r/data=CiQSIhIgMGY3ZTJkYzdlOGExMTFlNjk5MGQ2ZjgxOGQ2OWE2ZTc)).\nTherefore, it is important to minimize falsely identifying areas with reduced traffic as areas\nwithout power.\n[OpenStreetMap (OSM)](https://planet.openstreetmap.org/) is a\ncollaborative project which creates publicly available geographic data\nof the world. I used [Geofabrik's download\nsites](https://download.geofabrik.de/) to retrieve a shapefile of all\nhighways in Texas and prepared a Geopackage (`.gpkg` file) containing\njust the subset of roads that intersect the Houston metropolitan area.\n\n-   `gis_osm_roads_free_1.gpkg`\n\n#### Houses\n\nI also obtained building data from OpenStreetMap. Again, I downloaded\nfrom Geofabrick and prepared a GeoPackage containing only houses in the\nHouston metropolitan area.\\\n\n-   `gis_osm_buildings_a_free_1.gpkg`\n\n#### Socioeconomic\n\nI used data from the [U.S. Census Bureau's American\nCommunity Survey](https://www.census.gov/programs-surveys/acs) for\ncensus tracts in 2019 to reoresent socioeconomic data of different regions of Houston. The *folder* `ACS_2019_5YR_TRACT_48.gdb` is an\nArcGIS [\"file\ngeodatabase\"](https://desktop.arcgis.com/en/arcmap/latest/manage-data/administer-file-gdbs/file-geodatabases.htm),\na multi-file proprietary format that's roughly analogous to a GeoPackage\nfile.\nEach layer contains a subset of the fields documents in the [ACS\nmetadata](https://www2.census.gov/geo/docs/maps-data/data/tiger/prejoined/ACSMetadata2011.txt).\nThe geodatabase contains a layer holding the geometry information,\nseparate from the layers holding the ACS attributes. You have to combine\nthe geometry with the attributes to get a feature layer that `sf` can\nuse.\n\n\n## Analysis\n\n#### Find locations of blackouts\n\n##### combine the data \n\nFirst, I read in the night lights tiles data and combining them into a single `stars` object for each date (2021-02-07 and 2021-02-16).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#reading in raster data \nt1 = read_stars(file.path(data, \"VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.tif\"))\nt2 = read_stars(file.path(data,\"VNP46A1/VNP46A1.A2021038.h08v06.001.2021039064329.tif\"))\nt3 = read_stars(file.path(data,\"VNP46A1/VNP46A1.A2021047.h08v05.001.2021048091106.tif\"))\nt4 = read_stars(file.path(data,\"VNP46A1/VNP46A1.A2021047.h08v06.001.2021048091105.tif\"))\n\n#creating a mosaic of houston raster data for both days \nlights_mos1 <- st_mosaic(t1, t2)\nlights_mos2 <- st_mosaic(t3, t4)\n\n# plot(lights_mos1)\n```\n:::\n\n\n##### create a blackout mask\n\nI then found the change in night lights intensity (presumably) caused by the\nstorm. I first reclassified a difference raster, assuming that any location that experienced a drop of more than 200 nW cm^-2^sr^-1^ experienced a blackout. `NA` values were to all locations that experienced a drop of *less* than 200 nW cm^-2^sr^-1^.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#finding difference in light intensity by subtracting light difference \nlight_diff <- lights_mos1 - lights_mos2\n\n# plot(light_diff)\n\n#reclassify raster to give NA values to locations that did not experience a blackout\nlight_diff[light_diff < 200] = NA\n\n# plot(light_diff)\n```\n:::\n\n\n##### vectorize the mask \n\nI vectorized the the blackout mask and fixed any invalid geometries using `st_make_valid`. I then inspected it to make sure it was an sf object and to look at its characteristics.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#creating a black out mask as a sf object. This creates a mask of geometries that experienced a black out\nbo_mask <- st_as_sf(light_diff)\n\n#making sure geometries are valid\nst_make_valid(bo_mask)\n\n#making sure new object is an sf and inspecting it\nclass(bo_mask)\n# plot(bo_mask)\nsummary(bo_mask)\n```\n:::\n\n\n##### crop the vectorized map to Houston\n\nI defined the Houston metropolitan area with the following coordinates: (-96.5, 29), (-96.5, 30.5), (-94.5, 30.5), (-94.5, 29) and then turned them into a polygon using `st_polygon`. A CRS was then added to the polygon to make a simple features collection using `st_sfc()`. Lastly, I cropped (spatially subset) the blackout mask to our region of interest and re-project the cropped blackout dataset to EPSG:3083 (NAD83 / Texas Centric Albers Equal Area).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#creating a matrix of coordinates for houston\n#note: last coordinate need to be same as the first\nhstn_cords <- matrix(c(-96.5, 29, -96.5, 30.5, -94.5, 30.5, -94.5, 29, -96.5, 29), ncol = 2, byrow = TRUE)\n\n#creating a polygon for houston \nhstn_poly <- st_polygon(list(hstn_cords))\n\nclass(hstn_poly)\n\n#making a simple feature collection using same crs as bo_mask\nhstn_sf <- st_sfc(hstn_poly, crs = 4326)\n\nclass(hstn_sf)\n\n#cropping black out mask to the houston sf object \nbo_mask_houst <- bo_mask[hstn_sf, ] \n\n#transforming crs to EPSG:3083 \nbo_mask_houst <- st_transform(bo_mask_houst, 3083)\n```\n:::\n\n\n##### Check #1: Ensurign that the mask function worked\n\n::: {.cell}\n\n```{.r .cell-code}\n##### creating a check ######\n\ncat(\"CHECK #1 - see if raster data is masked within Houston:\", \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCHECK #1 - see if raster data is masked within Houston: \n```\n:::\n\n```{.r .cell-code}\nif(nrow(bo_mask_houst) == nrow(bo_mask)) {\n  cat(\"No: mask did not work.\", \"\\n\")\n} else {\n  cat(\" Yes, all black out raster data lie within the Houston polygon.\", \"\\n\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Yes, all black out raster data lie within the Houston polygon. \n```\n:::\n:::\n\n\n</br> \n</br>\n\n##### exclude highways from blackout mask \n\nThe roads geopackage provoded includes data on roads other than highways.\nHowever, we can avoid reading in data we don't need by taking advantage\nof `st_read`'s ability to subset using a SQL query. This allows us to save comutational energy by just pulling in relevant data we want.\n\nFirst I defined a SQL query:\n\n`query <- \"SELECT * FROM gis_osm_roads_free_1 WHERE fclass='motorway'\"`\n\nI applied to `st_read` to load just highway data from geopackage. I then reprojected the data to EPSG:3083 and identified areas within 200m of all highways using `st_buffer` and dissolved them with `st_union`. Lastly, I find areas that experienced blackouts that are further than 200m from a highway through spatial subsetting using the `st_disjoint` operation.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#assigning a query that pulls highway roads\nhighway_query <- \"SELECT * FROM gis_osm_roads_free_1 WHERE fclass='motorway'\"\n\n#reading in highway data \nhighways <- st_read(file.path(data,\"gis_osm_roads_free_1.gpkg\"), query = highway_query, quiet = TRUE)\n\n#transforming highways crs to 3083\nhighways <- st_transform(highways, 3083)\n\n#creating a 200m buffer around highways \nhigh_buff <- st_buffer(highways, dist = 200)\n\n#dissolveing buffers \nhigh_buff_dis <- st_union(high_buff)\n\n# plot(high_buff_dis)\n\n#finding areas more than 200m from a highway that experienced a blackout \nmask_no_hwy <- bo_mask_houst[high_buff_dis, op = st_disjoint]\n```\n:::\n\n\n##### Check #2: see if the highway exclusion mask removed all polygons within the 200m of highways\n\n::: {.cell}\n\n```{.r .cell-code}\n#### creating a check #######\ncat(\"CHECK #2 - see if the highway exclusion mask removed all polygons within the 200m of highways:\", \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCHECK #2 - see if the highway exclusion mask removed all polygons within the 200m of highways: \n```\n:::\n\n```{.r .cell-code}\nif(nrow(mask_no_hwy) + nrow(bo_mask_houst[high_buff_dis, ]) == nrow(bo_mask_houst)) {\n  cat(\"Yes, the highway mask removed all polygons within the 200m of highways.\", \"\\n\")\n  } else {\n    cat(\"Error! Observations within highway mask are included.\", \"\\n\")\n  }\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYes, the highway mask removed all polygons within the 200m of highways. \n```\n:::\n:::\n\n\n</br> \n</br>\n\n#### Find homes impacted by blackouts\n\n##### load buildings data \n\nThe buildings dataset was then loaded in using `st_read` and the following SQL query:\n\n`SELECT *`  `FROM gis_osm_buildings_a_free_1`\n`WHERE (type IS NULL AND name IS NULL)`\n`OR type in ('residential', 'apartments', 'house', 'static_caravan', 'detached')`\\\n\nAgain, this reduces the amount of data pulled inoto R, saving us time, energy, and storage.\n\n::: {.cell}\n\n```{.r .cell-code}\n#making a query for pulling specific building data\nbuildings_query <- \"SELECT * FROM gis_osm_buildings_a_free_1 WHERE (type IS NULL AND name IS NULL) OR type in ('residential', 'apartments', 'house', 'static_caravan', 'detached')\"\n\n#reading in building data \nbuildings <- st_read(file.path(data, \"gis_osm_buildings_a_free_1.gpkg\"), query = buildings_query, quiet = TRUE)\n\n#transforming crs to 3083 \nbuildings <- st_transform(buildings, 3083)\n\n# plot(buildings)\n```\n:::\n\n\n\n##### find homes in blackout areas \n\nI then filtered the mask to homes within blackout areas and counted the number of impacted homes.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#subsettign the number of homes experiencing blackouts \n#I am including areas inside of houston that also extend outside of Houston border using st_intersects\nbo_homes <- buildings[mask_no_hwy, ]\n\n#counting blackout homes\nbo_homes_cnt <- comma(nrow(bo_homes))\n\ncat(\"Number of homes that experienced blackouts during the storm:\", bo_homes_cnt, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNumber of homes that experienced blackouts during the storm: 139,148 \n```\n:::\n:::\n\n\n</br>\n\n#### Investigate socioeconomic factors\n\n##### load ACS data \n\nFirst, I read in the geodatabase layers using `st_read()` (geometries are stored in the `ACS_2019_5YR_TRACT_48_TEXAS` layer and income data is stored in the `X19_INCOME` layer).\nFor this analysis, I used the median income field `B19013e1` for income.\nData was then reprojected to EPSG:3083.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# reading ACS gdb layers\nst_layers(file.path(data, \"ACS_2019_5YR_TRACT_48_TEXAS.gdb\"))\n\n# reading in geometries layer\nacs_geoms <- st_read(file.path(data, \"ACS_2019_5YR_TRACT_48_TEXAS.gdb\"), layer = \"ACS_2019_5YR_TRACT_48_TEXAS\") %>% \n  st_transform(\"EPSG:3083\")\n\n# reading in income layer\n#selecting just GEOID and median income \nacs_income <- st_read(file.path(data, \"ACS_2019_5YR_TRACT_48_TEXAS.gdb\"), layer = \"X19_INCOME\") %>% \n  select(GEOID_Data = GEOID, med_income = B19013e1)\n```\n:::\n\n\n\n\n##### determine which census tracts experienced blackouts \n\nNext, I joined the income data to the census tract geometries uaing a `left_join` function by \"ID\". This was then spatially joined to the census tract data with buildings determined to be impacted by blackouts using the `st_intersects` operation. Lastly, census tracts that had blackouts were identified.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#finding out how many and which census tracts experienced a blackout\n\n#joining income data to geometries \nacs_join <- left_join(acs_geoms, acs_income)\n\n# spatial join census tract data with buildings \nspat_join <- acs_join %>% \n   st_filter(bo_homes, .predicate = st_intersects)\n\n# length(spat_join)\n# names(spat_join)\n\n#census tracts that experience a blackout\nbo_tract_list <- unique(spat_join$NAMELSAD)\n\n#count of census tracts that experience a blackout\nbo_tract_count <- length(bo_tract_list)\n```\n:::\n\n\n\n##### CHECK #3: making sure only census tracts with homes that experienced a blackout are included:\n\n::: {.cell}\n\n```{.r .cell-code}\n### creating a check #####\ncat(\"CHECK #3 - making sure only census tracts with homes that experienced a blackout are included:\", \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCHECK #3 - making sure only census tracts with homes that experienced a blackout are included: \n```\n:::\n\n```{.r .cell-code}\nif(nrow(acs_join) > nrow(spat_join)) {\n  cat(\"Yes, only black out census tracts included.\", \"\\n\")\n} else {\n  cat(\"No, filter didn't work\", \"\\n\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYes, only black out census tracts included. \n```\n:::\n:::\n\n\n\n\n##### compare incomes of impacted tracts to unimpacted tracts \n\nFinally, I created a map of median income by census tract and designated which tracts experienced blackouts. I then plot the distribution of income in impacted and nonimpacted tracts to visualize what the spread of the community income looked like.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# In this section, I am mapping the median income of affected census tracts from the black out to visually show what the income of affected areas are in Houston\n\n#check census tract crs\nst_crs(acs_join)\n\n#transform Houston polygon crs to match census tract crs\nhstn_3083 <- st_transform(hstn_sf, 3083)\n\n# masking census tracts to houston\ntract_mask <- acs_join[hstn_3083, ]\n\n#making a new column saying whether or not tracts was a black out or not\ntract_mask <- tract_mask %>% \n  mutate(blackout = ifelse(NAMELSAD %in% bo_tract_list, \"TRUE\", \"FALSE\"))\n\n\n\n# mapping median income of census tracts that experienced blackouts\n\n# getting a polygon of texas \ntexas <- us_states %>% \n  filter(NAME == \"Texas\") %>% \n  st_transform(3083)\n\n#making an inset map of texas with Houston filled in red  \ninset_map <- ggplot() +\n  geom_sf(data = texas) + \n  geom_sf(data = hstn_3083, fill = \"red\") + \n  theme_bw() +\n   theme(axis.text = element_blank(),\n        axis.ticks = element_blank(),\n  panel.grid.major = element_blank(),\n  panel.grid.minor = element_blank())\n\n\n#creating a main map of census tracts that experienced blackouts by color \nmain_map <-\n  ggplot() +\n  geom_sf(data = tract_mask, color = \"lightgrey\") +\n  geom_sf(data = spat_join, aes(fill = med_income)) +\n  scale_fill_viridis_c() +\n  labs(fill = \"Median Income ($)\") +\n  theme_minimal() +\n  annotation_scale(plot_unit = \"m\", location = \"bl\") +\n  theme( legend.position= c(1.25, .75),\n         plot.margin=unit(c(1,6,.5,1),\"cm\")) +\n  annotation_north_arrow(location = \"bl\",\n                         pad_x = unit(0.05, \"in\"),\n                         pad_y = unit(0.3, \"in\"),\n                         style = ggspatial::north_arrow_minimal())\n\n#combining main and inset map \n comb_map <- main_map + \n    inset_element(inset_map, 1, -0.4, 1.4, .9) +\n  plot_annotation(tag_levels = \"A\")\n \n comb_map\n```\n\n::: {.cell-output-display}\n![**Figure 1. Median income of census tracts in Houston, TX that experienced blackouts in February 2021.** Map **A** shows all census tracts in Houston area, were tracts that experienced a blackout color coded by the median income of houslholds within the tracts. Brighter colored tracts have higher median incomes where darker colored tracts have lower. Map **B** shows an inset map of where Houston is located in the state of Texas.](houston_blackout_files/figure-html/unnamed-chunk-13-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n</br> \n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# here I am creating a histogram and box plot to compare the median incomes of affected and unaffected tracts\n\n#first, calculate median of median incomes for both groups \nmeds <- tract_mask %>% \n  group_by(blackout) %>% \n  summarize(med_med_income = median(med_income, na.rm = TRUE)) %>% \n  st_drop_geometry()\n\n\n#creating a histogram of income distribution \nhist <- ggplot(tract_mask, aes(x = med_income, fill = blackout)) +\n  geom_histogram(bins = 65) +\n  labs(x = \"Median income ($)\", y = \"Frequency\") +\n  theme_minimal() +\n  theme(legend.position = \"bottom\") +\n  geom_segment(data = meds, aes(x = med_med_income, xend = med_med_income, y = 0, yend = 80, color = blackout), linetype = \"dashed\") +\n  # geom_vline(data = meds, aes(xintercept = med_med_income, color = blackout), linetype = \"dashed\") +\n  scale_fill_manual(name = \"\", values = c( \"lightblue\", \"orange\"), labels = c(\"No blackouts\", \"Blackouts\" )) +\n  scale_color_manual(name = \"Median\", values = c( \"blue\", \"orange3\"), labels = c(\"No blackouts\", \"Blackouts\" )) \n  # coord_cartesian(ylim = c(0, 75))\n  \n  \n#creating a boxplot of median income distribution \nbox_p <- ggplot(tract_mask, aes(x = blackout, y = med_income, fill = blackout)) +\n  geom_boxplot(width = 0.5, show.legend = FALSE) +\n  # geom_jitter(width = 0.2, alpha = 0.5, color = \"grey\") +  \n  labs(y = \"Median Income ($)\", x = \"\") +\n  theme_minimal() +\n  scale_fill_manual( name = \"\", values = c( \"lightblue\", \"orange\"), labels = c(\"No blackouts\", \"Blackouts\")) +\n  scale_x_discrete(labels = c(\"FALSE\" = \"No blackouts\", \"TRUE\" = \"Blackouts\")) \n\n\n#adding up plots into one using patchwork\npatched <- hist + box_p + \n  plot_annotation(tag_levels = \"A\") +\n  plot_layout(guides = \"collect\") &\n  theme(legend.position = \"bottom\")\n\npatched\n```\n\n::: {.cell-output-display}\n![**Figure 2. Median houshold income distribution of census tracts in blackout vs non-blackout areas in Houston, 2021.** The first plot **A** shows a histogram of the distribution of median income in both groups of tracts. The frequency is concentrated just under $50,000 for both groups. Data is abnormally distributed with a long right tail, indiating most housholds are lower income with some higher income households drawing the tail right. Plot **B** shows a whisker plot of median distribution. Boxes represent the inter quartile range (IQR, 50% of the data), and the line inside each box represents the median. The whiskers represent 1.5 times the length of the IQR, with some outliers falling above the whiskers.](houston_blackout_files/figure-html/unnamed-chunk-14-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n</br> \n\n\n### Conclusion\n\nOverall, these results show that census tracts had a similar median\nincome distribution regardless of whether or not they experienced a\nblack out in the February 2021 storm, but income was slightly higher for tracts that experienced a blackout than those that did not. The median of the census tract median income distribution was $57,002 for non-blackout tracts and \n$60,642 for blackout tracts. The majority of the income\ndistribution is centered at about $35,000 - \n$45,000, with some outliers in the\n\\$200,000 + range. Some of the limitations of the study are that the\ncensus tracts don't represent how many homes experienced a black out or\nhow long the black out was experienced for. These factors could have\nunderlying socioeconomic patterns that we can't see here which could explain why certain tracts experienced blackouts for the duration that they did. This should be an area for fututre investigation to strengthen the results found in this study.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "supporting": [
      "houston_blackout_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}